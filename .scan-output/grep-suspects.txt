./client/src/pages/ipd-console.tsx:20:    patientName: "James Kamau",
./client/src/pages/ipd-console.tsx:24:    doctorName: "Dr. Sarah Johnson",
./client/src/pages/ipd-console.tsx:30:    patientName: "Mary Kipchoge",
./client/src/pages/ipd-console.tsx:34:    doctorName: "Dr. Ahmed Hassan",
./client/src/pages/ipd-console.tsx:40:    patientName: "baby Ochieng",
./client/src/pages/ipd-console.tsx:44:    doctorName: "Dr. Emily Carter",
./client/src/pages/ipd-console.tsx:56:    adm.patientName.toLowerCase().includes(searchTerm.toLowerCase()) ||
./client/src/pages/ipd-console.tsx:182:                    <p className="font-semibold">{adm.patientName}</p>
./client/src/pages/ipd-console.tsx:194:                      <p className="font-medium text-foreground">{adm.doctorName}</p>
./client/src/pages/emergency-console.tsx:11:    patientName: "Peter Kipchoge",
./client/src/pages/emergency-console.tsx:21:    patientName: "Grace Mwangi",
./client/src/pages/emergency-console.tsx:31:    patientName: "John Mbatha",
./client/src/pages/emergency-console.tsx:45:    c.patientName.toLowerCase().includes(searchTerm.toLowerCase()) ||
./client/src/pages/emergency-console.tsx:166:                      <p className="font-bold text-lg">{c.patientName}</p>
./dist/public/assets/index-CkWY5UYw.js:52:Defaulting to \`null\`.`}var uf=of,FN=cf;const ff=c.forwardRef(({className:e,value:n,...r},s)=>t.jsx(uf,{ref:s,className:k("relative h-4 w-full overflow-hidden rounded-full bg-secondary",e),...r,children:t.jsx(FN,{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:`translateX(-${100-(n||0)}%)`}})}));ff.displayName=uf.displayName;const $N={active:"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-400",completed:"bg-gray-100 text-gray-800 dark:bg-gray-900/30 dark:text-gray-400",cancelled:"bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-400",on_hold:"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/30 dark:text-yellow-400"};function Ls({prescription:e,onRequestRefill:n}){const r=e.refillsTotal?(e.refillsTotal-(e.refillsRemaining||0))/e.refillsTotal*100:0,s=e.status==="active"&&(e.refillsRemaining||0)>0;return t.jsx(E,{"data-testid":`prescription-${e.id}`,children:t.jsx(T,{className:"p-4",children:t.jsxs("div",{className:"flex flex-col gap-4 sm:flex-row sm:items-start sm:justify-between",children:[t.jsxs("div",{className:"flex gap-4",children:[t.jsx("div",{className:"flex h-12 w-12 shrink-0 items-center justify-center rounded-md bg-primary/10",children:t.jsx(Ct,{className:"h-6 w-6 text-primary"})}),t.jsxs("div",{className:"flex flex-col gap-1",children:[t.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[t.jsx("span",{className:"font-semibold",children:e.medicationName}),t.jsx(oe,{variant:"outline",className:$N[e.status],children:e.status.replace("_"," ")})]}),t.jsx("span",{className:"text-sm font-medium",children:e.dosage}),t.jsx("span",{className:"text-sm text-muted-foreground",children:e.frequency}),t.jsxs("div",{className:"mt-2 flex flex-wrap items-center gap-4 text-xs text-muted-foreground",children:[t.jsxs("span",{className:"flex items-center gap-1",children:[t.jsx(Be,{className:"h-3 w-3"}),"Started: ",Z(it(e.startDate),"MMM d, yyyy")]}),e.pharmacy&&t.jsxs("span",{className:"flex items-center gap-1",children:[t.jsx(In,{className:"h-3 w-3"}),e.pharmacy]})]}),e.instructions&&t.jsx("p",{className:"mt-2 text-sm text-muted-foreground",children:e.instructions})]})]}),t.jsxs("div",{className:"flex flex-col items-end gap-2 sm:shrink-0",children:[e.refillsTotal&&e.refillsTotal>0&&t.jsxs("div",{className:"flex w-32 flex-col gap-1",children:[t.jsxs("div",{className:"flex items-center justify-between text-xs",children:[t.jsx("span",{className:"text-muted-foreground",children:"Refills"}),t.jsxs("span",{className:"font-medium",children:[e.refillsRemaining,"/",e.refillsTotal]})]}),t.jsx(ff,{value:r,className:"h-2"})]}),s&&n&&t.jsxs(I,{variant:"outline",size:"sm",onClick:()=>n(e.id),"data-testid":`button-refill-${e.id}`,children:[t.jsx(Uf,{className:"mr-2 h-3 w-3"}),"Request Refill"]})]})]})})})}function wi(){return t.jsx("div",{className:"flex flex-col gap-4",children:[1,2,3].map(e=>t.jsx(E,{children:t.jsx(T,{className:"p-4",children:t.jsx(xe,{className:"h-24 w-full"})})},e))})}function WN(){const{user:e}=ye(),{toast:n}=ct(),[r,s]=c.useState(""),[a,o]=c.useState(!1),[i,l]=c.useState(""),[d,u]=c.useState(""),[f,m]=c.useState(""),[h,x]=c.useState(""),[v,p]=c.useState(""),[g,y]=c.useState("0"),b=(e==null?void 0:e.role)==="patient",w=(e==null?void 0:e.role)==="doctor"||(e==null?void 0:e.role)==="nurse",{data:j,isLoading:N}=fe({queryKey:["/api/prescriptions"]}),{data:R}=fe({queryKey:["/api/users/patients"],enabled:w}),M=ln({mutationFn:async S=>cn("POST","/api/prescriptions",S),onSuccess:()=>{Wt.invalidateQueries({queryKey:["/api/prescriptions"]}),o(!1),$(),n({title:"Prescription Created",description:"The prescription has been sent to the pharmacy."})},onError:()=>{n({title:"Error",description:"Failed to create prescription. Please try again.",variant:"destructive"})}}),F=ln({mutationFn:async S=>cn("POST",`/api/prescriptions/${S}/refill`,{}),onSuccess:()=>{Wt.invalidateQueries({queryKey:["/api/prescriptions"]}),n({title:"Refill Requested",description:"Your refill request has been sent to your doctor."})}}),$=()=>{l(""),u(""),m(""),x(""),p(""),y("0")},C=()=>{if(!i||!d||!f||!h){n({title:"Missing Information",description:"Please fill in all required fields.",variant:"destructive"});return}M.mutate({patientId:i,doctorId:e==null?void 0:e.id,medicationName:d,dosage:f,frequency:h,startDate:new Date().toISOString(),status:"active",refillsRemaining:parseInt(g),refillsTotal:parseInt(g),instructions:v,pharmacy:"Neudebri Pharmacy"})},B=(j==null?void 0:j.filter(S=>S.status==="active"))||[],D=(j==null?void 0:j.filter(S=>S.status==="completed"))||[],V=(j==null?void 0:j.filter(S=>S.status!=="active"&&S.status!=="completed"))||[],A=B.filter(S=>S.medicationName.toLowerCase().includes(r.toLowerCase()));return t.jsxs("div",{className:"flex flex-col gap-6","data-testid":"prescriptions-page",children:[t.jsxs("div",{className:"flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between",children:[t.jsxs("div",{children:[t.jsx("h1",{className:"text-3xl font-bold",children:"Prescriptions"}),t.jsx("p",{className:"text-muted-foreground",children:b?"View and manage your medications":"Manage patient prescriptions"})]}),w&&t.jsxs(I,{onClick:()=>o(!0),"data-testid":"button-write-prescription",children:[t.jsx(be,{className:"mr-2 h-4 w-4"}),"Write Prescription"]})]}),t.jsx("div",{className:"flex items-center gap-4",children:t.jsxs("div",{className:"relative flex-1 max-w-sm",children:[t.jsx(lt,{className:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-muted-foreground"}),t.jsx(De,{placeholder:"Search medications...",value:r,onChange:S=>s(S.target.value),className:"pl-10","data-testid":"input-search-prescriptions"})]})}),t.jsxs(Qn,{defaultValue:"active",className:"w-full",children:[t.jsxs(wn,{children:[t.jsxs(me,{value:"active","data-testid":"tab-active",children:["Active (",B.length,")"]}),t.jsxs(me,{value:"completed","data-testid":"tab-completed",children:["Completed (",D.length,")"]}),V.length>0&&t.jsxs(me,{value:"other","data-testid":"tab-other",children:["Other (",V.length,")"]})]}),t.jsx(he,{value:"active",className:"mt-6",children:N?t.jsx(wi,{}):A.length>0?t.jsx("div",{className:"flex flex-col gap-4",children:A.map(S=>t.jsx(Ls,{prescription:S,onRequestRefill:b?W=>F.mutate(W):void 0},S.id))}):t.jsx(E,{children:t.jsxs(T,{className:"flex flex-col items-center justify-center py-12",children:[t.jsx(Ct,{className:"h-12 w-12 text-muted-foreground/50"}),t.jsx("h3",{className:"mt-4 text-lg font-semibold",children:"No active prescriptions"}),t.jsx("p",{className:"mt-2 text-sm text-muted-foreground",children:r?"No medications match your search":"Your active prescriptions will appear here"})]})})}),t.jsx(he,{value:"completed",className:"mt-6",children:N?t.jsx(wi,{}):D.length>0?t.jsx("div",{className:"flex flex-col gap-4",children:D.map(S=>t.jsx(Ls,{prescription:S},S.id))}):t.jsx(E,{children:t.jsxs(T,{className:"flex flex-col items-center justify-center py-12",children:[t.jsx(Ct,{className:"h-12 w-12 text-muted-foreground/50"}),t.jsx("h3",{className:"mt-4 text-lg font-semibold",children:"No completed prescriptions"}),t.jsx("p",{className:"mt-2 text-sm text-muted-foreground",children:"Your prescription history will appear here"})]})})}),V.length>0&&t.jsx(he,{value:"other",className:"mt-6",children:t.jsx("div",{className:"flex flex-col gap-4",children:V.map(S=>t.jsx(Ls,{prescription:S},S.id))})})]}),t.jsx(xo,{open:a,onOpenChange:o,children:t.jsxs(rs,{className:"sm:max-w-lg",children:[t.jsxs(ss,{children:[t.jsx(os,{children:"Write Prescription"}),t.jsx(is,{children:"Create a new prescription for a patient."})]}),t.jsxs("div",{className:"grid gap-4 py-4",children:[t.jsxs("div",{className:"grid gap-2",children:[t.jsx(ce,{htmlFor:"patient",children:"Patient"}),t.jsxs(an,{value:i,onValueChange:l,children:[t.jsx(Ft,{id:"patient","data-testid":"select-patient",children:t.jsx(on,{placeholder:"Select patient"})}),t.jsx($t,{children:R==null?void 0:R.map(S=>t.jsxs(Ce,{value:S.id,children:[S.firstName," ",S.lastName]},S.id))})]})]}),t.jsxs("div",{className:"grid gap-2",children:[t.jsx(ce,{htmlFor:"medication",children:"Medication Name"}),t.jsx(De,{id:"medication",placeholder:"e.g., Lisinopril",value:d,onChange:S=>u(S.target.value),"data-testid":"input-medication"})]}),t.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[t.jsxs("div",{className:"grid gap-2",children:[t.jsx(ce,{htmlFor:"dosage",children:"Dosage"}),t.jsx(De,{id:"dosage",placeholder:"e.g., 10mg",value:f,onChange:S=>m(S.target.value),"data-testid":"input-dosage"})]}),t.jsxs("div",{className:"grid gap-2",children:[t.jsx(ce,{htmlFor:"frequency",children:"Frequency"}),t.jsxs(an,{value:h,onValueChange:x,children:[t.jsx(Ft,{id:"frequency","data-testid":"select-frequency",children:t.jsx(on,{placeholder:"Select"})}),t.jsxs($t,{children:[t.jsx(Ce,{value:"Once daily",children:"Once daily"}),t.jsx(Ce,{value:"Twice daily",children:"Twice daily"}),t.jsx(Ce,{value:"Three times daily",children:"Three times daily"}),t.jsx(Ce,{value:"Four times daily",children:"Four times daily"}),t.jsx(Ce,{value:"As needed",children:"As needed"}),t.jsx(Ce,{value:"Weekly",children:"Weekly"})]})]})]})]}),t.jsxs("div",{className:"grid gap-2",children:[t.jsx(ce,{htmlFor:"refills",children:"Number of Refills"}),t.jsxs(an,{value:g,onValueChange:y,children:[t.jsx(Ft,{id:"refills","data-testid":"select-refills",children:t.jsx(on,{})}),t.jsx($t,{children:[0,1,2,3,4,5,6].map(S=>t.jsxs(Ce,{value:S.toString(),children:[S," refill",S!==1?"s":""]},S))})]})]}),t.jsxs("div",{className:"grid gap-2",children:[t.jsx(ce,{htmlFor:"instructions",children:"Special Instructions"}),t.jsx(Vn,{id:"instructions",placeholder:"e.g., Take with food...",value:v,onChange:S=>p(S.target.value),className:"resize-none","data-testid":"input-instructions"})]})]}),t.jsxs(as,{children:[t.jsx(I,{variant:"outline",onClick:()=>o(!1),children:"Cancel"}),t.jsx(I,{onClick:C,disabled:M.isPending,"data-testid":"button-submit-prescription",children:M.isPending?"Creating...":"Create Prescription"})]})]})})]})}const BN={pending:{color:"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/30 dark:text-yellow-400",icon:Be},in_progress:{color:"bg-blue-100 text-blue-800 dark:bg-blue-900/30 dark:text-blue-400",icon:Pt},completed:{color:"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-400",icon:Ws},reviewed:{color:"bg-gray-100 text-gray-800 dark:bg-gray-900/30 dark:text-gray-400",icon:pt}};function Fs({result:e,onViewDetails:n}){const r=BN[e.status],s=(r==null?void 0:r.icon)||Be;return t.jsx(E,{"data-testid":`lab-result-${e.id}`,children:t.jsx(T,{className:"p-4",children:t.jsxs("div",{className:"flex flex-col gap-4 sm:flex-row sm:items-start sm:justify-between",children:[t.jsxs("div",{className:"flex gap-4",children:[t.jsx("div",{className:`flex h-12 w-12 shrink-0 items-center justify-center rounded-md ${e.isAbnormal?"bg-red-100 dark:bg-red-900/30":"bg-muted"}`,children:e.isAbnormal?t.jsx(Lt,{className:"h-6 w-6 text-red-500"}):t.jsx(Pt,{className:"h-6 w-6 text-muted-foreground"})}),t.jsxs("div",{className:"flex flex-col gap-1",children:[t.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[t.jsx("span",{className:"font-semibold",children:e.testName}),t.jsxs(oe,{variant:"outline",className:r==null?void 0:r.color,children:[t.jsx(s,{className:"mr-1 h-3 w-3"}),e.status.replace("_"," ")]}),e.isAbnormal&&t.jsx(oe,{variant:"destructive",className:"text-xs",children:"Abnormal"})]}),e.testCode&&t.jsxs("span",{className:"text-xs text-muted-foreground",children:["Code: ",e.testCode]}),e.result&&t.jsxs("div",{className:"mt-2 flex items-center gap-2",children:[t.jsxs("span",{className:`text-lg font-bold ${e.isAbnormal?"text-red-500":""}`,children:[e.result," ",e.unit]}),e.normalRange&&t.jsxs("span",{className:"text-sm text-muted-foreground",children:["(Normal: ",e.normalRange,")"]})]}),t.jsxs("div",{className:"mt-1 flex flex-wrap items-center gap-4 text-xs text-muted-foreground",children:[t.jsxs("span",{children:["Ordered: ",Z(it(e.orderedDate),"MMM d, yyyy")]}),e.resultDate&&t.jsxs("span",{children:["Result: ",Z(it(e.resultDate),"MMM d, yyyy")]})]}),e.notes&&t.jsx("p",{className:"mt-2 text-sm text-muted-foreground",children:e.notes})]})]}),n&&e.status==="completed"&&t.jsxs(I,{variant:"outline",size:"sm",onClick:()=>n(e.id),"data-testid":`button-view-lab-${e.id}`,children:[t.jsx(pt,{className:"mr-2 h-3 w-3"}),"View Details"]})]})})})}function $s(){return t.jsx("div",{className:"flex flex-col gap-4",children:[1,2,3].map(e=>t.jsx(E,{children:t.jsx(T,{className:"p-4",children:t.jsx(xe,{className:"h-24 w-full"})})},e))})}function VN(){ye();const{toast:e}=ct(),[n,r]=c.useState(""),{data:s,isLoading:a}=fe({queryKey:["/api/lab-results"]}),o=f=>{e({title:"Lab Result Details",description:"Opening detailed lab report..."})},i=(s==null?void 0:s.filter(f=>f.status==="pending"||f.status==="in_progress"))||[],l=(s==null?void 0:s.filter(f=>f.status==="completed"))||[];s!=null&&s.filter(f=>f.status==="reviewed");const d=(s==null?void 0:s.filter(f=>f.isAbnormal))||[],u=f=>f.filter(m=>m.testName.toLowerCase().includes(n.toLowerCase()));return t.jsxs("div",{className:"flex flex-col gap-6","data-testid":"lab-results-page",children:[t.jsxs("div",{children:[t.jsx("h1",{className:"text-3xl font-bold",children:"Lab Results"}),t.jsx("p",{className:"text-muted-foreground",children:"View your laboratory test results and history"})]}),t.jsxs("div",{className:"grid gap-4 sm:grid-cols-2 lg:grid-cols-4",children:[t.jsx(E,{children:t.jsxs(T,{className:"flex items-center gap-4 p-4",children:[t.jsx("div",{className:"flex h-10 w-10 items-center justify-center rounded-md bg-yellow-100 dark:bg-yellow-900/30",children:t.jsx(Be,{className:"h-5 w-5 text-yellow-600"})}),t.jsxs("div",{children:[t.jsx("p",{className:"text-2xl font-bold",children:i.length}),t.jsx("p",{className:"text-sm text-muted-foreground",children:"Pending"})]})]})}),t.jsx(E,{children:t.jsxs(T,{className:"flex items-center gap-4 p-4",children:[t.jsx("div",{className:"flex h-10 w-10 items-center justify-center rounded-md bg-green-100 dark:bg-green-900/30",children:t.jsx(Ws,{className:"h-5 w-5 text-green-600"})}),t.jsxs("div",{children:[t.jsx("p",{className:"text-2xl font-bold",children:l.length}),t.jsx("p",{className:"text-sm text-muted-foreground",children:"Completed"})]})]})}),t.jsx(E,{children:t.jsxs(T,{className:"flex items-center gap-4 p-4",children:[t.jsx("div",{className:"flex h-10 w-10 items-center justify-center rounded-md bg-red-100 dark:bg-red-900/30",children:t.jsx(Lt,{className:"h-5 w-5 text-red-600"})}),t.jsxs("div",{children:[t.jsx("p",{className:"text-2xl font-bold",children:d.length}),t.jsx("p",{className:"text-sm text-muted-foreground",children:"Abnormal"})]})]})}),t.jsx(E,{children:t.jsxs(T,{className:"flex items-center gap-4 p-4",children:[t.jsx("div",{className:"flex h-10 w-10 items-center justify-center rounded-md bg-blue-100 dark:bg-blue-900/30",children:t.jsx(Pt,{className:"h-5 w-5 text-blue-600"})}),t.jsxs("div",{children:[t.jsx("p",{className:"text-2xl font-bold",children:(s==null?void 0:s.length)||0}),t.jsx("p",{className:"text-sm text-muted-foreground",children:"Total Tests"})]})]})})]}),t.jsx("div",{className:"flex items-center gap-4",children:t.jsxs("div",{className:"relative flex-1 max-w-sm",children:[t.jsx(lt,{className:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-muted-foreground"}),t.jsx(De,{placeholder:"Search lab tests...",value:n,onChange:f=>r(f.target.value),className:"pl-10","data-testid":"input-search-labs"})]})}),t.jsxs(Qn,{defaultValue:"all",className:"w-full",children:[t.jsxs(wn,{children:[t.jsxs(me,{value:"all","data-testid":"tab-all",children:["All Results (",(s==null?void 0:s.length)||0,")"]}),t.jsxs(me,{value:"pending","data-testid":"tab-pending",children:["Pending (",i.length,")"]}),t.jsxs(me,{value:"abnormal","data-testid":"tab-abnormal",children:[t.jsx(Lt,{className:"mr-1 h-3 w-3"}),"Abnormal (",d.length,")"]})]}),t.jsx(he,{value:"all",className:"mt-6",children:a?t.jsx($s,{}):s&&u(s).length>0?t.jsx("div",{className:"flex flex-col gap-4",children:u(s).map(f=>t.jsx(Fs,{result:f,onViewDetails:o},f.id))}):t.jsx(E,{children:t.jsxs(T,{className:"flex flex-col items-center justify-center py-12",children:[t.jsx(Pt,{className:"h-12 w-12 text-muted-foreground/50"}),t.jsx("h3",{className:"mt-4 text-lg font-semibold",children:"No lab results"}),t.jsx("p",{className:"mt-2 text-sm text-muted-foreground",children:n?"No results match your search":"Your lab test results will appear here"})]})})}),t.jsx(he,{value:"pending",className:"mt-6",children:a?t.jsx($s,{}):u(i).length>0?t.jsx("div",{className:"flex flex-col gap-4",children:u(i).map(f=>t.jsx(Fs,{result:f},f.id))}):t.jsx(E,{children:t.jsxs(T,{className:"flex flex-col items-center justify-center py-12",children:[t.jsx(Be,{className:"h-12 w-12 text-muted-foreground/50"}),t.jsx("h3",{className:"mt-4 text-lg font-semibold",children:"No pending results"}),t.jsx("p",{className:"mt-2 text-sm text-muted-foreground",children:"All your lab tests have been completed"})]})})}),t.jsx(he,{value:"abnormal",className:"mt-6",children:a?t.jsx($s,{}):u(d).length>0?t.jsxs("div",{className:"flex flex-col gap-4",children:[t.jsx(E,{className:"border-destructive/50 bg-destructive/5",children:t.jsxs(T,{className:"flex items-center gap-3 p-4",children:[t.jsx(Lt,{className:"h-5 w-5 text-destructive"}),t.jsx("p",{className:"text-sm",children:"These results are outside the normal range. Please consult with your healthcare provider."})]})}),u(d).map(f=>t.jsx(Fs,{result:f,onViewDetails:o},f.id))]}):t.jsx(E,{children:t.jsxs(T,{className:"flex flex-col items-center justify-center py-12",children:[t.jsx(Ws,{className:"h-12 w-12 text-green-500/50"}),t.jsx("h3",{className:"mt-4 text-lg font-semibold",children:"All results normal"}),t.jsx("p",{className:"mt-2 text-sm text-muted-foreground",children:"None of your lab results are flagged as abnormal"})]})})})]})]})}function HN(e,n){return c.useReducer((r,s)=>n[r][s]??r,e)}var bo="ScrollArea",[mf,Z0]=Ae(bo),[zN,Ue]=mf(bo),hf=c.forwardRef((e,n)=>{const{__scopeScrollArea:r,type:s="hover",dir:a,scrollHideDelay:o=600,...i}=e,[l,d]=c.useState(null),[u,f]=c.useState(null),[m,h]=c.useState(null),[x,v]=c.useState(null),[p,g]=c.useState(null),[y,b]=c.useState(0),[w,j]=c.useState(0),[N,R]=c.useState(!1),[M,F]=c.useState(!1),$=q(n,B=>d(B)),C=Gn(a);return t.jsx(zN,{scope:r,type:s,dir:C,scrollHideDelay:o,scrollArea:l,viewport:u,onViewportChange:f,content:m,onContentChange:h,scrollbarX:x,onScrollbarXChange:v,scrollbarXEnabled:N,onScrollbarXEnabledChange:R,scrollbarY:p,onScrollbarYChange:g,scrollbarYEnabled:M,onScrollbarYEnabledChange:F,onCornerWidthChange:b,onCornerHeightChange:j,children:t.jsx(H.div,{dir:C,...i,ref:$,style:{position:"relative","--radix-scroll-area-corner-width":y+"px","--radix-scroll-area-corner-height":w+"px",...e.style}})})});hf.displayName=bo;var xf="ScrollAreaViewport",pf=c.forwardRef((e,n)=>{const{__scopeScrollArea:r,children:s,nonce:a,...o}=e,i=Ue(xf,r),l=c.useRef(null),d=q(n,l,i.onViewportChange);return t.jsxs(t.Fragment,{children:[t.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-scroll-area-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-scroll-area-viewport]::-webkit-scrollbar{display:none}"},nonce:a}),t.jsx(H.div,{"data-radix-scroll-area-viewport":"",...o,ref:d,style:{overflowX:i.scrollbarXEnabled?"scroll":"hidden",overflowY:i.scrollbarYEnabled?"scroll":"hidden",...e.style},children:t.jsx("div",{ref:i.onContentChange,style:{minWidth:"100%",display:"table"},children:s})})]})});pf.displayName=xf;var ut="ScrollAreaScrollbar",yo=c.forwardRef((e,n)=>{const{forceMount:r,...s}=e,a=Ue(ut,e.__scopeScrollArea),{onScrollbarXEnabledChange:o,onScrollbarYEnabledChange:i}=a,l=e.orientation==="horizontal";return c.useEffect(()=>(l?o(!0):i(!0),()=>{l?o(!1):i(!1)}),[l,o,i]),a.type==="hover"?t.jsx(YN,{...s,ref:n,forceMount:r}):a.type==="scroll"?t.jsx(UN,{...s,ref:n,forceMount:r}):a.type==="auto"?t.jsx(gf,{...s,ref:n,forceMount:r}):a.type==="always"?t.jsx(wo,{...s,ref:n}):null});yo.displayName=ut;var YN=c.forwardRef((e,n)=>{const{forceMount:r,...s}=e,a=Ue(ut,e.__scopeScrollArea),[o,i]=c.useState(!1);return c.useEffect(()=>{const l=a.scrollArea;let d=0;if(l){const u=()=>{window.clearTimeout(d),i(!0)},f=()=>{d=window.setTimeout(()=>i(!1),a.scrollHideDelay)};return l.addEventListener("pointerenter",u),l.addEventListener("pointerleave",f),()=>{window.clearTimeout(d),l.removeEventListener("pointerenter",u),l.removeEventListener("pointerleave",f)}}},[a.scrollArea,a.scrollHideDelay]),t.jsx(Te,{present:r||o,children:t.jsx(gf,{"data-state":o?"visible":"hidden",...s,ref:n})})}),UN=c.forwardRef((e,n)=>{const{forceMount:r,...s}=e,a=Ue(ut,e.__scopeScrollArea),o=e.orientation==="horizontal",i=fs(()=>d("SCROLL_END"),100),[l,d]=HN("hidden",{hidden:{SCROLL:"scrolling"},scrolling:{SCROLL_END:"idle",POINTER_ENTER:"interacting"},interacting:{SCROLL:"interacting",POINTER_LEAVE:"idle"},idle:{HIDE:"hidden",SCROLL:"scrolling",POINTER_ENTER:"interacting"}});return c.useEffect(()=>{if(l==="idle"){const u=window.setTimeout(()=>d("HIDE"),a.scrollHideDelay);return()=>window.clearTimeout(u)}},[l,a.scrollHideDelay,d]),c.useEffect(()=>{const u=a.viewport,f=o?"scrollLeft":"scrollTop";if(u){let m=u[f];const h=()=>{const x=u[f];m!==x&&(d("SCROLL"),i()),m=x};return u.addEventListener("scroll",h),()=>u.removeEventListener("scroll",h)}},[a.viewport,o,d,i]),t.jsx(Te,{present:r||l!=="hidden",children:t.jsx(wo,{"data-state":l==="hidden"?"hidden":"visible",...s,ref:n,onPointerEnter:O(e.onPointerEnter,()=>d("POINTER_ENTER")),onPointerLeave:O(e.onPointerLeave,()=>d("POINTER_LEAVE"))})})}),gf=c.forwardRef((e,n)=>{const r=Ue(ut,e.__scopeScrollArea),{forceMount:s,...a}=e,[o,i]=c.useState(!1),l=e.orientation==="horizontal",d=fs(()=>{if(r.viewport){const u=r.viewport.offsetWidth<r.viewport.scrollWidth,f=r.viewport.offsetHeight<r.viewport.scrollHeight;i(l?u:f)}},10);return mn(r.viewport,d),mn(r.content,d),t.jsx(Te,{present:s||o,children:t.jsx(wo,{"data-state":o?"visible":"hidden",...a,ref:n})})}),wo=c.forwardRef((e,n)=>{const{orientation:r="vertical",...s}=e,a=Ue(ut,e.__scopeScrollArea),o=c.useRef(null),i=c.useRef(0),[l,d]=c.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),u=jf(l.viewport,l.content),f={...s,sizes:l,onSizesChange:d,hasThumb:u>0&&u<1,onThumbChange:h=>o.current=h,onThumbPointerUp:()=>i.current=0,onThumbPointerDown:h=>i.current=h};function m(h,x){return JN(h,i.current,l,x)}return r==="horizontal"?t.jsx(KN,{...f,ref:n,onThumbPositionChange:()=>{if(a.viewport&&o.current){const h=a.viewport.scrollLeft,x=ji(h,l,a.dir);o.current.style.transform=`translate3d(${x}px, 0, 0)`}},onWheelScroll:h=>{a.viewport&&(a.viewport.scrollLeft=h)},onDragScroll:h=>{a.viewport&&(a.viewport.scrollLeft=m(h,a.dir))}}):r==="vertical"?t.jsx(GN,{...f,ref:n,onThumbPositionChange:()=>{if(a.viewport&&o.current){const h=a.viewport.scrollTop,x=ji(h,l);o.current.style.transform=`translate3d(0, ${x}px, 0)`}},onWheelScroll:h=>{a.viewport&&(a.viewport.scrollTop=h)},onDragScroll:h=>{a.viewport&&(a.viewport.scrollTop=m(h))}}):null}),KN=c.forwardRef((e,n)=>{const{sizes:r,onSizesChange:s,...a}=e,o=Ue(ut,e.__scopeScrollArea),[i,l]=c.useState(),d=c.useRef(null),u=q(n,d,o.onScrollbarXChange);return c.useEffect(()=>{d.current&&l(getComputedStyle(d.current))},[d]),t.jsx(bf,{"data-orientation":"horizontal",...a,ref:u,sizes:r,style:{bottom:0,left:o.dir==="rtl"?"var(--radix-scroll-area-corner-width)":0,right:o.dir==="ltr"?"var(--radix-scroll-area-corner-width)":0,"--radix-scroll-area-thumb-width":us(r)+"px",...e.style},onThumbPointerDown:f=>e.onThumbPointerDown(f.x),onDragScroll:f=>e.onDragScroll(f.x),onWheelScroll:(f,m)=>{if(o.viewport){const h=o.viewport.scrollLeft+f.deltaX;e.onWheelScroll(h),Sf(h,m)&&f.preventDefault()}},onResize:()=>{d.current&&o.viewport&&i&&s({content:o.viewport.scrollWidth,viewport:o.viewport.offsetWidth,scrollbar:{size:d.current.clientWidth,paddingStart:_r(i.paddingLeft),paddingEnd:_r(i.paddingRight)}})}})}),GN=c.forwardRef((e,n)=>{const{sizes:r,onSizesChange:s,...a}=e,o=Ue(ut,e.__scopeScrollArea),[i,l]=c.useState(),d=c.useRef(null),u=q(n,d,o.onScrollbarYChange);return c.useEffect(()=>{d.current&&l(getComputedStyle(d.current))},[d]),t.jsx(bf,{"data-orientation":"vertical",...a,ref:u,sizes:r,style:{top:0,right:o.dir==="ltr"?0:void 0,left:o.dir==="rtl"?0:void 0,bottom:"var(--radix-scroll-area-corner-height)","--radix-scroll-area-thumb-height":us(r)+"px",...e.style},onThumbPointerDown:f=>e.onThumbPointerDown(f.y),onDragScroll:f=>e.onDragScroll(f.y),onWheelScroll:(f,m)=>{if(o.viewport){const h=o.viewport.scrollTop+f.deltaY;e.onWheelScroll(h),Sf(h,m)&&f.preventDefault()}},onResize:()=>{d.current&&o.viewport&&i&&s({content:o.viewport.scrollHeight,viewport:o.viewport.offsetHeight,scrollbar:{size:d.current.clientHeight,paddingStart:_r(i.paddingTop),paddingEnd:_r(i.paddingBottom)}})}})}),[qN,vf]=mf(ut),bf=c.forwardRef((e,n)=>{const{__scopeScrollArea:r,sizes:s,hasThumb:a,onThumbChange:o,onThumbPointerUp:i,onThumbPointerDown:l,onThumbPositionChange:d,onDragScroll:u,onWheelScroll:f,onResize:m,...h}=e,x=Ue(ut,r),[v,p]=c.useState(null),g=q(n,$=>p($)),y=c.useRef(null),b=c.useRef(""),w=x.viewport,j=s.content-s.viewport,N=de(f),R=de(d),M=fs(m,10);function F($){if(y.current){const C=$.clientX-y.current.left,B=$.clientY-y.current.top;u({x:C,y:B})}}return c.useEffect(()=>{const $=C=>{const B=C.target;(v==null?void 0:v.contains(B))&&N(C,j)};return document.addEventListener("wheel",$,{passive:!1}),()=>document.removeEventListener("wheel",$,{passive:!1})},[w,v,j,N]),c.useEffect(R,[s,R]),mn(v,M),mn(x.content,M),t.jsx(qN,{scope:r,scrollbar:v,hasThumb:a,onThumbChange:de(o),onThumbPointerUp:de(i),onThumbPositionChange:R,onThumbPointerDown:de(l),children:t.jsx(H.div,{...h,ref:g,style:{position:"absolute",...h.style},onPointerDown:O(e.onPointerDown,$=>{$.button===0&&($.target.setPointerCapture($.pointerId),y.current=v.getBoundingClientRect(),b.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",x.viewport&&(x.viewport.style.scrollBehavior="auto"),F($))}),onPointerMove:O(e.onPointerMove,F),onPointerUp:O(e.onPointerUp,$=>{const C=$.target;C.hasPointerCapture($.pointerId)&&C.releasePointerCapture($.pointerId),document.body.style.webkitUserSelect=b.current,x.viewport&&(x.viewport.style.scrollBehavior=""),y.current=null})})})}),Dr="ScrollAreaThumb",yf=c.forwardRef((e,n)=>{const{forceMount:r,...s}=e,a=vf(Dr,e.__scopeScrollArea);return t.jsx(Te,{present:r||a.hasThumb,children:t.jsx(XN,{ref:n,...s})})}),XN=c.forwardRef((e,n)=>{const{__scopeScrollArea:r,style:s,...a}=e,o=Ue(Dr,r),i=vf(Dr,r),{onThumbPositionChange:l}=i,d=q(n,m=>i.onThumbChange(m)),u=c.useRef(void 0),f=fs(()=>{u.current&&(u.current(),u.current=void 0)},100);return c.useEffect(()=>{const m=o.viewport;if(m){const h=()=>{if(f(),!u.current){const x=ZN(m,l);u.current=x,l()}};return l(),m.addEventListener("scroll",h),()=>m.removeEventListener("scroll",h)}},[o.viewport,f,l]),t.jsx(H.div,{"data-state":i.hasThumb?"visible":"hidden",...a,ref:d,style:{width:"var(--radix-scroll-area-thumb-width)",height:"var(--radix-scroll-area-thumb-height)",...s},onPointerDownCapture:O(e.onPointerDownCapture,m=>{const x=m.target.getBoundingClientRect(),v=m.clientX-x.left,p=m.clientY-x.top;i.onThumbPointerDown({x:v,y:p})}),onPointerUp:O(e.onPointerUp,i.onThumbPointerUp)})});yf.displayName=Dr;var jo="ScrollAreaCorner",wf=c.forwardRef((e,n)=>{const r=Ue(jo,e.__scopeScrollArea),s=!!(r.scrollbarX&&r.scrollbarY);return r.type!=="scroll"&&s?t.jsx(QN,{...e,ref:n}):null});wf.displayName=jo;var QN=c.forwardRef((e,n)=>{const{__scopeScrollArea:r,...s}=e,a=Ue(jo,r),[o,i]=c.useState(0),[l,d]=c.useState(0),u=!!(o&&l);return mn(a.scrollbarX,()=>{var m;const f=((m=a.scrollbarX)==null?void 0:m.offsetHeight)||0;a.onCornerHeightChange(f),d(f)}),mn(a.scrollbarY,()=>{var m;const f=((m=a.scrollbarY)==null?void 0:m.offsetWidth)||0;a.onCornerWidthChange(f),i(f)}),u?t.jsx(H.div,{...s,ref:n,style:{width:o,height:l,position:"absolute",right:a.dir==="ltr"?0:void 0,left:a.dir==="rtl"?0:void 0,bottom:0,...e.style}}):null});function _r(e){return e?parseInt(e,10):0}function jf(e,n){const r=e/n;return isNaN(r)?0:r}function us(e){const n=jf(e.viewport,e.content),r=e.scrollbar.paddingStart+e.scrollbar.paddingEnd,s=(e.scrollbar.size-r)*n;return Math.max(s,18)}function JN(e,n,r,s="ltr"){const a=us(r),o=a/2,i=n||o,l=a-i,d=r.scrollbar.paddingStart+i,u=r.scrollbar.size-r.scrollbar.paddingEnd-l,f=r.content-r.viewport,m=s==="ltr"?[0,f]:[f*-1,0];return Nf([d,u],m)(e)}function ji(e,n,r="ltr"){const s=us(n),a=n.scrollbar.paddingStart+n.scrollbar.paddingEnd,o=n.scrollbar.size-a,i=n.content-n.viewport,l=o-s,d=r==="ltr"?[0,i]:[i*-1,0],u=sa(e,d);return Nf([0,i],[0,l])(u)}function Nf(e,n){return r=>{if(e[0]===e[1]||n[0]===n[1])return n[0];const s=(n[1]-n[0])/(e[1]-e[0]);return n[0]+s*(r-e[0])}}function Sf(e,n){return e>0&&e<n}var ZN=(e,n=()=>{})=>{let r={left:e.scrollLeft,top:e.scrollTop},s=0;return function a(){const o={left:e.scrollLeft,top:e.scrollTop},i=r.left!==o.left,l=r.top!==o.top;(i||l)&&n(),r=o,s=window.requestAnimationFrame(a)}(),()=>window.cancelAnimationFrame(s)};function fs(e,n){const r=de(e),s=c.useRef(0);return c.useEffect(()=>()=>window.clearTimeout(s.current),[]),c.useCallback(()=>{window.clearTimeout(s.current),s.current=window.setTimeout(r,n)},[r,n])}function mn(e,n){const r=de(n);pe(()=>{let s=0;if(e){const a=new ResizeObserver(()=>{cancelAnimationFrame(s),s=window.requestAnimationFrame(r)});return a.observe(e),()=>{window.cancelAnimationFrame(s),a.unobserve(e)}}},[e,r])}var Cf=hf,e0=pf,t0=wf;const da=c.forwardRef(({className:e,children:n,...r},s)=>t.jsxs(Cf,{ref:s,className:k("relative overflow-hidden",e),...r,children:[t.jsx(e0,{className:"h-full w-full rounded-[inherit]",children:n}),t.jsx(Pf,{}),t.jsx(t0,{})]}));da.displayName=Cf.displayName;const Pf=c.forwardRef(({className:e,orientation:n="vertical",...r},s)=>t.jsx(yo,{ref:s,orientation:n,className:k("flex touch-none select-none transition-colors",n==="vertical"&&"h-full w-2.5 border-l border-l-transparent p-[1px]",n==="horizontal"&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",e),...r,children:t.jsx(yf,{className:"relative flex-1 rounded-full bg-border"})}));Pf.displayName=yo.displayName;function n0(e){const n=it(e);return hb(n)?Z(n,"h:mm a"):xb(n)?"Yesterday":Z(n,"MMM d")}function r0({message:e,isSelected:n,onClick:r,currentUserId:s}){var l,d;const a=e.senderId===s?e.receiver:e.sender,o=a?`${((l=a.firstName)==null?void 0:l[0])||""}${((d=a.lastName)==null?void 0:d[0])||""}`:"?",i=!e.isRead&&e.receiverId===s;return t.jsxs("button",{onClick:r,className:`flex w-full items-start gap-3 rounded-md p-3 text-left transition-colors hover-elevate active-elevate-2 ${n?"bg-accent":""}`,"data-testid":`message-item-${e.id}`,children:[t.jsx(Rt,{className:"h-10 w-10 shrink-0",children:t.jsx(Dt,{className:`text-sm ${i?"bg-primary text-primary-foreground":"bg-muted"}`,children:o})}),t.jsxs("div",{className:"flex flex-1 flex-col gap-0.5 overflow-hidden",children:[t.jsxs("div",{className:"flex items-center justify-between gap-2",children:[t.jsx("span",{className:`truncate text-sm ${i?"font-semibold":"font-medium"}`,children:a?`${a.firstName} ${a.lastName}`:"Unknown"}),t.jsx("span",{className:"shrink-0 text-xs text-muted-foreground",children:n0(e.sentAt)})]}),e.subject&&t.jsx("span",{className:`truncate text-sm ${i?"font-medium":"text-muted-foreground"}`,children:e.subject}),t.jsx("span",{className:"truncate text-xs text-muted-foreground",children:e.content}),t.jsxs("div",{className:"mt-1 flex items-center gap-2",children:[(a==null?void 0:a.role)&&t.jsx(oe,{variant:"outline",className:"text-xs capitalize",children:a.role}),e.priority==="urgent"&&t.jsx(oe,{variant:"destructive",className:"text-xs",children:"Urgent"}),e.priority==="high"&&t.jsx(oe,{variant:"secondary",className:"text-xs",children:"High Priority"})]})]}),i&&t.jsx("div",{className:"mt-1 h-2 w-2 shrink-0 rounded-full bg-primary"})]})}function s0(){return t.jsx("div",{className:"flex flex-col gap-2",children:[1,2,3,4,5].map(e=>t.jsx(xe,{className:"h-20 w-full"},e))})}function a0(){var V,A;const{user:e}=ye(),{toast:n}=ct(),[r,s]=c.useState(null),[a,o]=c.useState(""),[i,l]=c.useState(!1),[d,u]=c.useState(""),[f,m]=c.useState(""),[h,x]=c.useState(""),[v,p]=c.useState(""),[g,y]=c.useState("normal"),{data:b,isLoading:w}=fe({queryKey:["/api/messages"]}),{data:j}=fe({queryKey:["/api/users/contacts"]}),N=ln({mutationFn:async S=>cn("POST","/api/messages",S),onSuccess:()=>{Wt.invalidateQueries({queryKey:["/api/messages"]}),l(!1),m(""),x(""),p(""),y("normal"),n({title:"Message Sent",description:"Your message has been delivered."})},onError:()=>{n({title:"Error",description:"Failed to send message. Please try again.",variant:"destructive"})}}),R=ln({mutationFn:async S=>cn("PATCH",`/api/messages/${S}/read`,{}),onSuccess:()=>{Wt.invalidateQueries({queryKey:["/api/messages"]})}}),M=S=>{s(S),!S.isRead&&S.receiverId===(e==null?void 0:e.id)&&R.mutate(S.id)},F=()=>{if(!f||!v){n({title:"Missing Information",description:"Please select a recipient and write a message.",variant:"destructive"});return}N.mutate({senderId:e==null?void 0:e.id,receiverId:f,subject:h||"No Subject",content:v,sentAt:new Date().toISOString(),priority:g})},$=()=>{if(!d||!r)return;const S=r.senderId===(e==null?void 0:e.id)?r.receiverId:r.senderId;N.mutate({senderId:e==null?void 0:e.id,receiverId:S,subject:`Re: ${r.subject||"No Subject"}`,content:d,sentAt:new Date().toISOString(),priority:"normal"}),u("")},C=(b==null?void 0:b.filter(S=>{const W=S.senderId===(e==null?void 0:e.id)?S.receiver:S.sender;return`${W==null?void 0:W.firstName} ${W==null?void 0:W.lastName} ${S.subject} ${S.content}`.toLowerCase().includes(a.toLowerCase())}))||[],B=(b==null?void 0:b.filter(S=>!S.isRead&&S.receiverId===(e==null?void 0:e.id)).length)||0,D=r?r.senderId===(e==null?void 0:e.id)?r.receiver:r.sender:null;return t.jsxs("div",{className:"flex h-[calc(100vh-8rem)] flex-col gap-6","data-testid":"messages-page",children:[t.jsxs("div",{className:"flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between",children:[t.jsxs("div",{children:[t.jsx("h1",{className:"text-3xl font-bold",children:"Messages"}),t.jsxs("p",{className:"text-muted-foreground",children:["Secure messaging with your healthcare team",B>0&&t.jsxs(oe,{variant:"default",className:"ml-2",children:[B," unread"]})]})]}),t.jsxs(I,{onClick:()=>l(!0),"data-testid":"button-compose",children:[t.jsx(be,{className:"mr-2 h-4 w-4"}),"New Message"]})]}),t.jsxs("div",{className:"flex flex-1 gap-6 overflow-hidden",children:[t.jsxs(E,{className:`flex flex-col ${r?"hidden md:flex":""} w-full md:w-80 lg:w-96`,children:[t.jsx(U,{className:"p-4",children:t.jsxs("div",{className:"relative",children:[t.jsx(lt,{className:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-muted-foreground"}),t.jsx(De,{placeholder:"Search messages...",value:a,onChange:S=>o(S.target.value),className:"pl-10","data-testid":"input-search-messages"})]})}),t.jsx(T,{className:"flex-1 overflow-hidden p-0",children:t.jsx(da,{className:"h-full",children:w?t.jsx("div",{className:"p-4",children:t.jsx(s0,{})}):C.length>0?t.jsx("div",{className:"flex flex-col",children:C.map(S=>t.jsx(r0,{message:S,isSelected:(r==null?void 0:r.id)===S.id,onClick:()=>M(S),currentUserId:e==null?void 0:e.id},S.id))}):t.jsxs("div",{className:"flex flex-col items-center justify-center p-8 text-center",children:[t.jsx(at,{className:"h-12 w-12 text-muted-foreground/50"}),t.jsx("h3",{className:"mt-4 text-lg font-semibold",children:"No messages"}),t.jsx("p",{className:"mt-2 text-sm text-muted-foreground",children:a?"No messages match your search":"Start a conversation with your care team"})]})})})]}),t.jsx(E,{className:`flex flex-1 flex-col ${r?"":"hidden md:flex"}`,children:r?t.jsxs(t.Fragment,{children:[t.jsxs(U,{className:"flex flex-row items-center gap-4 border-b p-4",children:[t.jsx(I,{variant:"ghost",size:"icon",className:"md:hidden",onClick:()=>s(null),"data-testid":"button-back",children:t.jsx(Kf,{className:"h-4 w-4"})}),t.jsx(Rt,{className:"h-10 w-10",children:t.jsx(Dt,{children:D?`${(V=D.firstName)==null?void 0:V[0]}${(A=D.lastName)==null?void 0:A[0]}`:"?"})}),t.jsxs("div",{className:"flex-1",children:[t.jsx("p",{className:"font-semibold",children:D?`${D.firstName} ${D.lastName}`:"Unknown"}),t.jsxs("p",{className:"text-sm text-muted-foreground capitalize",children:[D==null?void 0:D.role,(D==null?void 0:D.specialty)&&` - ${D.specialty}`]})]})]}),t.jsx(T,{className:"flex-1 overflow-hidden p-0",children:t.jsx(da,{className:"h-full p-4",children:t.jsx("div",{className:"flex flex-col gap-4",children:t.jsxs("div",{className:"rounded-lg border p-4",children:[t.jsxs("div",{className:"mb-2 flex items-center justify-between gap-2",children:[t.jsx("h3",{className:"font-semibold",children:r.subject||"No Subject"}),t.jsx("span",{className:"shrink-0 text-xs text-muted-foreground",children:Z(it(r.sentAt),"MMM d, yyyy 'at' h:mm a")})]}),t.jsx("p",{className:"whitespace-pre-wrap text-sm",children:r.content})]})})})}),t.jsxs("div",{className:"border-t p-4",children:[t.jsx("div",{className:"flex gap-2",children:t.jsx(Vn,{placeholder:"Type your reply...",value:d,onChange:S=>u(S.target.value),className:"min-h-20 resize-none","data-testid":"input-reply"})}),t.jsx("div",{className:"mt-2 flex justify-end gap-2",children:t.jsxs(I,{onClick:$,disabled:!d||N.isPending,"data-testid":"button-send-reply",children:[t.jsx(To,{className:"mr-2 h-4 w-4"}),"Send Reply"]})})]})]}):t.jsxs(T,{className:"flex flex-1 flex-col items-center justify-center",children:[t.jsx(at,{className:"h-16 w-16 text-muted-foreground/50"}),t.jsx("h3",{className:"mt-4 text-lg font-semibold",children:"Select a message"}),t.jsx("p",{className:"mt-2 text-sm text-muted-foreground",children:"Choose a conversation to view the messages"})]})})]}),t.jsx(xo,{open:i,onOpenChange:l,children:t.jsxs(rs,{className:"sm:max-w-lg",children:[t.jsxs(ss,{children:[t.jsx(os,{children:"New Message"}),t.jsx(is,{children:"Send a secure message to your healthcare provider."})]}),t.jsxs("div",{className:"grid gap-4 py-4",children:[t.jsxs("div",{className:"grid gap-2",children:[t.jsx(ce,{htmlFor:"recipient",children:"To"}),t.jsxs(an,{value:f,onValueChange:m,children:[t.jsx(Ft,{id:"recipient","data-testid":"select-recipient",children:t.jsx(on,{placeholder:"Select recipient"})}),t.jsx($t,{children:j==null?void 0:j.map(S=>t.jsxs(Ce,{value:S.id,children:[S.firstName," ",S.lastName,S.specialty&&` - ${S.specialty}`]},S.id))})]})]}),t.jsxs("div",{className:"grid gap-2",children:[t.jsx(ce,{htmlFor:"subject",children:"Subject"}),t.jsx(De,{id:"subject",placeholder:"Message subject...",value:h,onChange:S=>x(S.target.value),"data-testid":"input-subject"})]}),t.jsxs("div",{className:"grid gap-2",children:[t.jsx(ce,{htmlFor:"priority",children:"Priority"}),t.jsxs(an,{value:g,onValueChange:y,children:[t.jsx(Ft,{id:"priority","data-testid":"select-priority",children:t.jsx(on,{})}),t.jsxs($t,{children:[t.jsx(Ce,{value:"low",children:"Low"}),t.jsx(Ce,{value:"normal",children:"Normal"}),t.jsx(Ce,{value:"high",children:"High"}),t.jsx(Ce,{value:"urgent",children:"Urgent"})]})]})]}),t.jsxs("div",{className:"grid gap-2",children:[t.jsx(ce,{htmlFor:"content",children:"Message"}),t.jsx(Vn,{id:"content",placeholder:"Write your message...",value:v,onChange:S=>p(S.target.value),className:"min-h-32 resize-none","data-testid":"input-content"})]})]}),t.jsxs(as,{children:[t.jsx(I,{variant:"outline",onClick:()=>l(!1),children:"Cancel"}),t.jsxs(I,{onClick:F,disabled:N.isPending,"data-testid":"button-send-message",children:[t.jsx(To,{className:"mr-2 h-4 w-4"}),N.isPending?"Sending...":"Send Message"]})]})]})})]})}function o0(){ye();const{toast:e}=ct(),{data:n}=fe({queryKey:["/api/appointments/virtual"]}),r=(n==null?void 0:n.filter(a=>new Date(a.dateTime)>=new Date&&a.status!=="cancelled"))||[],s=()=>{e({title:"Connecting to Virtual Session",description:"Please wait while we connect you to your healthcare provider..."})};return t.jsxs("div",{className:"flex flex-col gap-6","data-testid":"virtual-care-page",children:[t.jsxs("div",{children:[t.jsx("h1",{className:"text-3xl font-bold",children:"Virtual Care"}),t.jsx("p",{className:"text-muted-foreground",children:"Connect with your healthcare provider from anywhere"})]}),t.jsxs("div",{className:"grid gap-6 lg:grid-cols-3",children:[t.jsxs(E,{className:"lg:col-span-2",children:[t.jsx(U,{children:t.jsxs(G,{className:"flex items-center gap-2",children:[t.jsx(He,{className:"h-5 w-5"}),"Get Care Now"]})}),t.jsx(T,{children:t.jsxs("div",{className:"flex flex-col gap-6",children:[t.jsx("div",{className:"rounded-lg bg-gradient-to-br from-primary/10 to-primary/5 p-6",children:t.jsxs("div",{className:"flex flex-col items-center gap-4 text-center sm:flex-row sm:text-left",children:[t.jsx("div",{className:"flex h-16 w-16 items-center justify-center rounded-full bg-primary",children:t.jsx(He,{className:"h-8 w-8 text-primary-foreground"})}),t.jsxs("div",{className:"flex-1",children:[t.jsx("h3",{className:"text-xl font-semibold",children:"24/7 Virtual Care Access"}),t.jsx("p",{className:"mt-1 text-muted-foreground",children:"Connect with a healthcare provider instantly via secure video consultation"})]}),t.jsx(I,{size:"lg",onClick:s,"data-testid":"button-start-visit",children:"Start Virtual Visit"})]})}),t.jsxs("div",{className:"grid gap-4 sm:grid-cols-3",children:[t.jsxs("div",{className:"flex items-center gap-3 rounded-lg border p-4",children:[t.jsx("div",{className:"flex h-10 w-10 items-center justify-center rounded-md bg-green-100 dark:bg-green-900/30",children:t.jsx(xt,{className:"h-5 w-5 text-green-600"})}),t.jsxs("div",{children:[t.jsx("p",{className:"font-medium",children:"HIPAA Compliant"}),t.jsx("p",{className:"text-xs text-muted-foreground",children:"Secure & encrypted"})]})]}),t.jsxs("div",{className:"flex items-center gap-3 rounded-lg border p-4",children:[t.jsx("div",{className:"flex h-10 w-10 items-center justify-center rounded-md bg-blue-100 dark:bg-blue-900/30",children:t.jsx(Be,{className:"h-5 w-5 text-blue-600"})}),t.jsxs("div",{children:[t.jsx("p",{className:"font-medium",children:"Average Wait"}),t.jsx("p",{className:"text-xs text-muted-foreground",children:"Under 10 minutes"})]})]}),t.jsxs("div",{className:"flex items-center gap-3 rounded-lg border p-4",children:[t.jsx("div",{className:"flex h-10 w-10 items-center justify-center rounded-md bg-purple-100 dark:bg-purple-900/30",children:t.jsx(ue,{className:"h-5 w-5 text-purple-600"})}),t.jsxs("div",{children:[t.jsx("p",{className:"font-medium",children:"Available"}),t.jsx("p",{className:"text-xs text-muted-foreground",children:"365 days/year"})]})]})]})]})})]}),t.jsxs(E,{children:[t.jsx(U,{children:t.jsx(G,{children:"Upcoming Virtual Visits"})}),t.jsx(T,{children:r.length>0?t.jsx("div",{className:"flex flex-col gap-4",children:r.slice(0,3).map(a=>{var o,i;return t.jsxs("div",{className:"flex flex-col gap-2 rounded-lg border p-3",children:[t.jsxs("div",{className:"flex items-center justify-between gap-2",children:[t.jsxs("span",{className:"font-medium",children:["Dr. ",(o=a.doctor)==null?void 0:o.firstName," ",(i=a.doctor)==null?void 0:i.lastName]}),t.jsx(oe,{variant:"outline",children:"Virtual"})]}),t.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[t.jsx(ue,{className:"h-3.5 w-3.5"}),Z(new Date(a.dateTime),"MMM d 'at' h:mm a")]}),t.jsxs(I,{size:"sm",className:"mt-2","data-testid":`button-join-${a.id}`,children:[t.jsx(He,{className:"mr-2 h-4 w-4"}),"Join Session"]})]},a.id)})}):t.jsxs("div",{className:"flex flex-col items-center justify-center py-8 text-center",children:[t.jsx(He,{className:"h-10 w-10 text-muted-foreground/50"}),t.jsx("p",{className:"mt-2 text-sm text-muted-foreground",children:"No upcoming virtual visits"}),t.jsx(we,{href:"/appointments",children:t.jsx(I,{variant:"outline",size:"sm",className:"mt-4",children:"Schedule Virtual Visit"})})]})})]})]}),t.jsxs(E,{children:[t.jsx(U,{children:t.jsx(G,{children:"Before Your Visit"})}),t.jsx(T,{children:t.jsxs("div",{className:"grid gap-4 sm:grid-cols-2 lg:grid-cols-4",children:[t.jsxs("div",{className:"flex flex-col items-center gap-2 rounded-lg border p-4 text-center",children:[t.jsx("div",{className:"flex h-12 w-12 items-center justify-center rounded-full bg-muted",children:t.jsx(Gf,{className:"h-6 w-6"})}),t.jsx("h4",{className:"font-medium",children:"Test Your Camera"}),t.jsx("p",{className:"text-xs text-muted-foreground",children:"Ensure your camera works properly before the visit"})]}),t.jsxs("div",{className:"flex flex-col items-center gap-2 rounded-lg border p-4 text-center",children:[t.jsx("div",{className:"flex h-12 w-12 items-center justify-center rounded-full bg-muted",children:t.jsx(qf,{className:"h-6 w-6"})}),t.jsx("h4",{className:"font-medium",children:"Check Your Microphone"}),t.jsx("p",{className:"text-xs text-muted-foreground",children:"Make sure you can be heard clearly"})]}),t.jsxs("div",{className:"flex flex-col items-center gap-2 rounded-lg border p-4 text-center",children:[t.jsx("div",{className:"flex h-12 w-12 items-center justify-center rounded-full bg-muted",children:t.jsx(Xf,{className:"h-6 w-6"})}),t.jsx("h4",{className:"font-medium",children:"Good Lighting"}),t.jsx("p",{className:"text-xs text-muted-foreground",children:"Find a well-lit area for your visit"})]}),t.jsxs("div",{className:"flex flex-col items-center gap-2 rounded-lg border p-4 text-center",children:[t.jsx("div",{className:"flex h-12 w-12 items-center justify-center rounded-full bg-muted",children:t.jsx(pa,{className:"h-6 w-6"})}),t.jsx("h4",{className:"font-medium",children:"Quiet Environment"}),t.jsx("p",{className:"text-xs text-muted-foreground",children:"Choose a private, quiet location"})]})]})})]})]})}const No=c.forwardRef(({className:e,...n},r)=>t.jsx("div",{className:"relative w-full overflow-auto",children:t.jsx("table",{ref:r,className:k("w-full caption-bottom text-sm",e),...n})}));No.displayName="Table";const So=c.forwardRef(({className:e,...n},r)=>t.jsx("thead",{ref:r,className:k("[&_tr]:border-b",e),...n}));So.displayName="TableHeader";const Co=c.forwardRef(({className:e,...n},r)=>t.jsx("tbody",{ref:r,className:k("[&_tr:last-child]:border-0",e),...n}));Co.displayName="TableBody";const i0=c.forwardRef(({className:e,...n},r)=>t.jsx("tfoot",{ref:r,className:k("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",e),...n}));i0.displayName="TableFooter";const Hn=c.forwardRef(({className:e,...n},r)=>t.jsx("tr",{ref:r,className:k("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",e),...n}));Hn.displayName="TableRow";const Fe=c.forwardRef(({className:e,...n},r)=>t.jsx("th",{ref:r,className:k("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",e),...n}));Fe.displayName="TableHead";const $e=c.forwardRef(({className:e,...n},r)=>t.jsx("td",{ref:r,className:k("p-4 align-middle [&:has([role=checkbox])]:pr-0",e),...n}));$e.displayName="TableCell";const l0=c.forwardRef(({className:e,...n},r)=>t.jsx("caption",{ref:r,className:k("mt-4 text-sm text-muted-foreground",e),...n}));l0.displayName="TableCaption";function c0(){return t.jsx("div",{className:"flex flex-col gap-2",children:[1,2,3,4,5].map(e=>t.jsx(xe,{className:"h-16 w-full"},e))})}function d0(){const{user:e}=ye(),[n,r]=c.useState(""),{data:s,isLoading:a}=fe({queryKey:["/api/users/patients"]}),o=(s==null?void 0:s.filter(i=>`${i.firstName} ${i.lastName} ${i.email}`.toLowerCase().includes(n.toLowerCase())))||[];return t.jsxs("div",{className:"flex flex-col gap-6","data-testid":"patients-page",children:[t.jsxs("div",{className:"flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between",children:[t.jsxs("div",{children:[t.jsx("h1",{className:"text-3xl font-bold",children:"Patients"}),t.jsx("p",{className:"text-muted-foreground",children:(e==null?void 0:e.role)==="admin"?"Manage all registered patients":"View and manage your patients"})]}),(e==null?void 0:e.role)==="admin"&&t.jsxs(I,{"data-testid":"button-add-patient",children:[t.jsx(be,{className:"mr-2 h-4 w-4"}),"Add Patient"]})]}),t.jsx("div",{className:"flex items-center gap-4",children:t.jsxs("div",{className:"relative flex-1 max-w-sm",children:[t.jsx(lt,{className:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-muted-foreground"}),t.jsx(De,{placeholder:"Search patients...",value:n,onChange:i=>r(i.target.value),className:"pl-10","data-testid":"input-search-patients"})]})}),t.jsx(E,{children:t.jsx(T,{className:"p-0",children:a?t.jsx("div",{className:"p-4",children:t.jsx(c0,{})}):o.length>0?t.jsxs(No,{children:[t.jsx(So,{children:t.jsxs(Hn,{children:[t.jsx(Fe,{children:"Patient"}),t.jsx(Fe,{children:"Contact"}),t.jsx(Fe,{children:"Date of Birth"}),t.jsx(Fe,{children:"Gender"}),t.jsx(Fe,{children:"Status"}),t.jsx(Fe,{className:"text-right",children:"Actions"})]})}),t.jsx(Co,{children:o.map(i=>{var l,d;return t.jsxs(Hn,{"data-testid":`patient-row-${i.id}`,children:[t.jsx($e,{children:t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx(Rt,{className:"h-9 w-9",children:t.jsxs(Dt,{className:"text-sm",children:[(l=i.firstName)==null?void 0:l[0],(d=i.lastName)==null?void 0:d[0]]})}),t.jsxs("div",{children:[t.jsxs("p",{className:"font-medium",children:[i.firstName," ",i.lastName]}),t.jsxs("p",{className:"text-xs text-muted-foreground",children:["ID: ",i.id.slice(0,8)]})]})]})}),t.jsx($e,{children:t.jsxs("div",{className:"flex flex-col",children:[t.jsx("span",{className:"text-sm",children:i.email}),i.phone&&t.jsx("span",{className:"text-xs text-muted-foreground",children:i.phone})]})}),t.jsx($e,{children:i.dateOfBirth?Z(it(i.dateOfBirth),"MMM d, yyyy"):"-"}),t.jsx($e,{className:"capitalize",children:i.gender||"-"}),t.jsx($e,{children:t.jsx(oe,{variant:i.isActive?"default":"secondary",children:i.isActive?"Active":"Inactive"})}),t.jsx($e,{className:"text-right",children:t.jsxs("div",{className:"flex justify-end gap-2",children:[t.jsx(I,{variant:"ghost",size:"icon","data-testid":`button-view-${i.id}`,children:t.jsx(Qf,{className:"h-4 w-4"})}),t.jsx(I,{variant:"ghost",size:"icon","data-testid":`button-schedule-${i.id}`,children:t.jsx(ue,{className:"h-4 w-4"})}),t.jsx(we,{href:"/messages",children:t.jsx(I,{variant:"ghost",size:"icon","data-testid":`button-message-${i.id}`,children:t.jsx(at,{className:"h-4 w-4"})})})]})})]},i.id)})})]}):t.jsxs("div",{className:"flex flex-col items-center justify-center py-12",children:[t.jsx(Re,{className:"h-12 w-12 text-muted-foreground/50"}),t.jsx("h3",{className:"mt-4 text-lg font-semibold",children:"No patients found"}),t.jsx("p",{className:"mt-2 text-sm text-muted-foreground",children:n?"No patients match your search":"No patients registered yet"})]})})})]})}function u0(){return t.jsx("div",{className:"grid gap-4 sm:grid-cols-2 lg:grid-cols-3",children:[1,2,3,4,5,6].map(e=>t.jsx(E,{children:t.jsx(T,{className:"p-4",children:t.jsx(xe,{className:"h-32 w-full"})})},e))})}function f0(){ye();const[e,n]=c.useState(""),{data:r,isLoading:s}=fe({queryKey:["/api/users/doctors"]}),a=(r==null?void 0:r.filter(o=>`${o.firstName} ${o.lastName} ${o.specialty} ${o.department}`.toLowerCase().includes(e.toLowerCase())))||[];return t.jsxs("div",{className:"flex flex-col gap-6","data-testid":"doctors-page",children:[t.jsxs("div",{className:"flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between",children:[t.jsxs("div",{children:[t.jsx("h1",{className:"text-3xl font-bold",children:"Doctors"}),t.jsx("p",{className:"text-muted-foreground",children:"Manage healthcare providers and staff"})]}),t.jsxs(I,{"data-testid":"button-add-doctor",children:[t.jsx(be,{className:"mr-2 h-4 w-4"}),"Add Doctor"]})]}),t.jsx("div",{className:"flex items-center gap-4",children:t.jsxs("div",{className:"relative flex-1 max-w-sm",children:[t.jsx(lt,{className:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-muted-foreground"}),t.jsx(De,{placeholder:"Search doctors by name or specialty...",value:e,onChange:o=>n(o.target.value),className:"pl-10","data-testid":"input-search-doctors"})]})}),s?t.jsx(u0,{}):a.length>0?t.jsx("div",{className:"grid gap-4 sm:grid-cols-2 lg:grid-cols-3",children:a.map(o=>{var i,l;return t.jsx(E,{"data-testid":`doctor-card-${o.id}`,children:t.jsx(T,{className:"p-4",children:t.jsxs("div",{className:"flex flex-col items-center gap-4 text-center",children:[t.jsx(Rt,{className:"h-16 w-16",children:t.jsxs(Dt,{className:"text-lg",children:[(i=o.firstName)==null?void 0:i[0],(l=o.lastName)==null?void 0:l[0]]})}),t.jsxs("div",{children:[t.jsxs("h3",{className:"font-semibold",children:["Dr. ",o.firstName," ",o.lastName]}),o.specialty&&t.jsx("p",{className:"text-sm text-muted-foreground",children:o.specialty})]}),t.jsxs("div",{className:"flex flex-wrap justify-center gap-2",children:[t.jsx(oe,{variant:o.isActive?"default":"secondary",children:o.isActive?"Active":"Inactive"}),o.department&&t.jsxs(oe,{variant:"outline",children:[t.jsx(In,{className:"mr-1 h-3 w-3"}),o.department]})]}),t.jsxs("div",{className:"flex w-full flex-col gap-2 text-sm text-muted-foreground",children:[t.jsxs("div",{className:"flex items-center justify-center gap-2",children:[t.jsx(Jf,{className:"h-3.5 w-3.5"}),t.jsx("span",{className:"truncate",children:o.email})]}),o.phone&&t.jsxs("div",{className:"flex items-center justify-center gap-2",children:[t.jsx(pa,{className:"h-3.5 w-3.5"}),t.jsx("span",{children:o.phone})]})]}),t.jsxs("div",{className:"flex w-full gap-2",children:[t.jsx(I,{variant:"outline",size:"sm",className:"flex-1",children:"View Profile"}),t.jsx(I,{variant:"outline",size:"sm",className:"flex-1",children:"Schedule"})]})]})})},o.id)})}):t.jsx(E,{children:t.jsxs(T,{className:"flex flex-col items-center justify-center py-12",children:[t.jsx(Pe,{className:"h-12 w-12 text-muted-foreground/50"}),t.jsx("h3",{className:"mt-4 text-lg font-semibold",children:"No doctors found"}),t.jsx("p",{className:"mt-2 text-sm text-muted-foreground",children:e?"No doctors match your search":"No doctors registered yet"})]})})]})}function m0(){return t.jsx("div",{className:"grid gap-4 sm:grid-cols-2 lg:grid-cols-3",children:[1,2,3,4,5,6].map(e=>t.jsx(E,{children:t.jsx(T,{className:"p-4",children:t.jsx(xe,{className:"h-32 w-full"})})},e))})}function h0(){const{data:e,isLoading:n}=fe({queryKey:["/api/departments"]}),{data:r}=fe({queryKey:["/api/users/doctors"]}),s=a=>(r==null?void 0:r.filter(o=>o.department===a).length)||0;return t.jsxs("div",{className:"flex flex-col gap-6","data-testid":"departments-page",children:[t.jsxs("div",{className:"flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between",children:[t.jsxs("div",{children:[t.jsx("h1",{className:"text-3xl font-bold",children:"Departments"}),t.jsx("p",{className:"text-muted-foreground",children:"Manage hospital departments and services"})]}),t.jsxs(I,{"data-testid":"button-add-department",children:[t.jsx(be,{className:"mr-2 h-4 w-4"}),"Add Department"]})]}),n?t.jsx(m0,{}):e&&e.length>0?t.jsx("div",{className:"grid gap-4 sm:grid-cols-2 lg:grid-cols-3",children:e.map(a=>t.jsxs(E,{"data-testid":`department-card-${a.id}`,children:[t.jsx(U,{className:"pb-2",children:t.jsxs("div",{className:"flex items-start justify-between gap-2",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:"flex h-10 w-10 items-center justify-center rounded-md bg-primary/10",children:t.jsx(In,{className:"h-5 w-5 text-primary"})}),t.jsx(G,{className:"text-lg",children:a.name})]}),t.jsx(oe,{variant:a.isActive?"default":"secondary",children:a.isActive?"Active":"Inactive"})]})}),t.jsx(T,{children:t.jsxs("div",{className:"flex flex-col gap-3",children:[a.description&&t.jsx("p",{className:"text-sm text-muted-foreground line-clamp-2",children:a.description}),t.jsxs("div",{className:"flex flex-col gap-2 text-sm",children:[t.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground",children:[t.jsx(Re,{className:"h-4 w-4"}),t.jsxs("span",{children:[s(a.name)," doctors"]})]}),a.location&&t.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground",children:[t.jsx(xa,{className:"h-4 w-4"}),t.jsx("span",{children:a.location})]}),a.phone&&t.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground",children:[t.jsx(pa,{className:"h-4 w-4"}),t.jsx("span",{children:a.phone})]})]}),t.jsx(I,{variant:"outline",size:"sm",className:"mt-2",children:"View Details"})]})})]},a.id))}):t.jsx(E,{children:t.jsxs(T,{className:"flex flex-col items-center justify-center py-12",children:[t.jsx(In,{className:"h-12 w-12 text-muted-foreground/50"}),t.jsx("h3",{className:"mt-4 text-lg font-semibold",children:"No departments"}),t.jsx("p",{className:"mt-2 text-sm text-muted-foreground",children:"Add departments to organize your healthcare facility"})]})})]})}var Po="Switch",[x0,eS]=Ae(Po),[p0,g0]=x0(Po),Tf=c.forwardRef((e,n)=>{const{__scopeSwitch:r,name:s,checked:a,defaultChecked:o,required:i,disabled:l,value:d="on",onCheckedChange:u,form:f,...m}=e,[h,x]=c.useState(null),v=q(n,w=>x(w)),p=c.useRef(!1),g=h?f||!!h.closest("form"):!0,[y=!1,b]=gt({prop:a,defaultProp:o,onChange:u});return t.jsxs(p0,{scope:r,checked:y,disabled:l,children:[t.jsx(H.button,{type:"button",role:"switch","aria-checked":y,"aria-required":i,"data-state":Rf(y),"data-disabled":l?"":void 0,disabled:l,value:d,...m,ref:v,onClick:O(e.onClick,w=>{b(j=>!j),g&&(p.current=w.isPropagationStopped(),p.current||w.stopPropagation())})}),g&&t.jsx(v0,{control:h,bubbles:!p.current,name:s,value:d,checked:y,required:i,disabled:l,form:f,style:{transform:"translateX(-100%)"}})]})});Tf.displayName=Po;var Mf="SwitchThumb",Ef=c.forwardRef((e,n)=>{const{__scopeSwitch:r,...s}=e,a=g0(Mf,r);return t.jsx(H.span,{"data-state":Rf(a.checked),"data-disabled":a.disabled?"":void 0,...s,ref:n})});Ef.displayName=Mf;var v0=e=>{const{control:n,checked:r,bubbles:s=!0,...a}=e,o=c.useRef(null),i=yu(r),l=jl(n);return c.useEffect(()=>{const d=o.current,u=window.HTMLInputElement.prototype,m=Object.getOwnPropertyDescriptor(u,"checked").set;if(i!==r&&m){const h=new Event("click",{bubbles:s});m.call(d,r),d.dispatchEvent(h)}},[i,r,s]),t.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:r,...a,tabIndex:-1,ref:o,style:{...e.style,...l,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})};function Rf(e){return e?"checked":"unchecked"}var Df=Tf,b0=Ef;const en=c.forwardRef(({className:e,...n},r)=>t.jsx(Df,{className:k("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",e),...n,ref:r,children:t.jsx(b0,{className:k("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})}));en.displayName=Df.displayName;function y0(){const{user:e}=ye(),{theme:n,setTheme:r,resolvedTheme:s}=Hl();return t.jsxs("div",{className:"flex flex-col gap-6","data-testid":"settings-page",children:[t.jsxs("div",{children:[t.jsx("h1",{className:"text-3xl font-bold",children:"Settings"}),t.jsx("p",{className:"text-muted-foreground",children:"Manage your account and application preferences"})]}),t.jsxs("div",{className:"grid gap-6 lg:grid-cols-2",children:[t.jsxs(E,{children:[t.jsxs(U,{children:[t.jsxs(G,{className:"flex items-center gap-2",children:[t.jsx(ga,{className:"h-5 w-5"}),"Profile Settings"]}),t.jsx(Dn,{children:"Manage your personal information"})]}),t.jsxs(T,{className:"space-y-4",children:[t.jsxs("div",{className:"grid gap-2",children:[t.jsx(ce,{children:"Full Name"}),t.jsxs("p",{className:"text-sm font-medium",children:[e==null?void 0:e.firstName," ",e==null?void 0:e.lastName]})]}),t.jsxs("div",{className:"grid gap-2",children:[t.jsx(ce,{children:"Email"}),t.jsx("p",{className:"text-sm font-medium",children:e==null?void 0:e.email})]}),t.jsxs("div",{className:"grid gap-2",children:[t.jsx(ce,{children:"Role"}),t.jsx("p",{className:"text-sm font-medium capitalize",children:e==null?void 0:e.role})]}),t.jsx(tn,{}),t.jsx(I,{variant:"outline",children:"Edit Profile"})]})]}),t.jsxs(E,{children:[t.jsxs(U,{children:[t.jsxs(G,{className:"flex items-center gap-2",children:[t.jsx(Zf,{className:"h-5 w-5"}),"Appearance"]}),t.jsx(Dn,{children:"Customize the look of the application"})]}),t.jsx(T,{className:"space-y-4",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{className:"space-y-0.5",children:[t.jsx(ce,{children:"Dark Mode"}),t.jsx("p",{className:"text-sm text-muted-foreground",children:"Toggle between light and dark themes"})]}),t.jsx(en,{checked:s==="dark",onCheckedChange:a=>r(a?"dark":"light"),"data-testid":"switch-dark-mode"})]})})]}),t.jsxs(E,{children:[t.jsxs(U,{children:[t.jsxs(G,{className:"flex items-center gap-2",children:[t.jsx(em,{className:"h-5 w-5"}),"Notifications"]}),t.jsx(Dn,{children:"Configure how you receive notifications"})]}),t.jsxs(T,{className:"space-y-4",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{className:"space-y-0.5",children:[t.jsx(ce,{children:"Email Notifications"}),t.jsx("p",{className:"text-sm text-muted-foreground",children:"Receive appointment reminders via email"})]}),t.jsx(en,{defaultChecked:!0,"data-testid":"switch-email-notifications"})]}),t.jsx(tn,{}),t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{className:"space-y-0.5",children:[t.jsx(ce,{children:"SMS Notifications"}),t.jsx("p",{className:"text-sm text-muted-foreground",children:"Receive text message reminders"})]}),t.jsx(en,{defaultChecked:!0,"data-testid":"switch-sms-notifications"})]}),t.jsx(tn,{}),t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{className:"space-y-0.5",children:[t.jsx(ce,{children:"Message Alerts"}),t.jsx("p",{className:"text-sm text-muted-foreground",children:"Get notified of new messages"})]}),t.jsx(en,{defaultChecked:!0,"data-testid":"switch-message-alerts"})]})]})]}),t.jsxs(E,{children:[t.jsxs(U,{children:[t.jsxs(G,{className:"flex items-center gap-2",children:[t.jsx(xt,{className:"h-5 w-5"}),"Security"]}),t.jsx(Dn,{children:"Manage your account security"})]}),t.jsxs(T,{className:"space-y-4",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{className:"space-y-0.5",children:[t.jsx(ce,{children:"Two-Factor Authentication"}),t.jsx("p",{className:"text-sm text-muted-foreground",children:"Add an extra layer of security"})]}),t.jsx(en,{"data-testid":"switch-2fa"})]}),t.jsx(tn,{}),t.jsx(I,{variant:"outline",children:"Change Password"})]})]})]}),t.jsx(E,{children:t.jsxs(T,{className:"flex items-center justify-between p-4",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx(xt,{className:"h-5 w-5 text-green-500"}),t.jsxs("div",{children:[t.jsx("p",{className:"text-sm font-medium",children:"HIPAA Compliant"}),t.jsx("p",{className:"text-xs text-muted-foreground",children:"Your data is encrypted and protected"})]})]}),t.jsxs("p",{className:"text-xs text-muted-foreground",children:["Last login: Today at ",new Date().toLocaleTimeString()]})]})})]})}function w0(){return t.jsx("div",{className:"min-h-screen w-full flex items-center justify-center bg-gray-50",children:t.jsx(E,{className:"w-full max-w-md mx-4",children:t.jsxs(T,{className:"pt-6",children:[t.jsxs("div",{className:"flex mb-4 gap-2",children:[t.jsx(ze,{className:"h-8 w-8 text-red-500"}),t.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"404 Page Not Found"})]}),t.jsx("p",{className:"mt-4 text-sm text-gray-600",children:"Did you forget to add the page to the router?"})]})})})}function j0(){return t.jsx("div",{className:"flex flex-col gap-4",children:[1,2,3].map(e=>t.jsx(E,{children:t.jsx(T,{className:"p-4",children:t.jsx(xe,{className:"h-32 w-full"})})},e))})}function N0(e){return e?e.includes("I")||e==="1"?"outline":e.includes("II")||e==="2"?"secondary":e.includes("III")||e==="3"||e.includes("IV")||e==="4"?"destructive":"secondary":"secondary"}function S0(){const{user:e}=ye(),{toast:n}=ct(),r=(e==null?void 0:e.role)==="patient"&&(e==null?void 0:e.id)||"patient-001",{data:s,isLoading:a}=fe({queryKey:[`/api/wound-care?patientId=${r}`]}),o=s||[];return a?t.jsxs("div",{className:"flex flex-col gap-6",children:[t.jsxs("div",{children:[t.jsx("h1",{className:"text-3xl font-bold",children:"Wound Care"}),t.jsx("p",{className:"text-muted-foreground",children:"Monitor and manage wound treatment"})]}),t.jsx(j0,{})]}):t.jsxs("div",{className:"flex flex-col gap-6",children:[t.jsxs("div",{className:"flex flex-col justify-between gap-4 sm:flex-row sm:items-center",children:[t.jsxs("div",{children:[t.jsx("h1",{className:"text-3xl font-bold",children:"Wound Care"}),t.jsx("p",{className:"text-muted-foreground",children:"Monitor and manage wound treatment and recovery"})]}),((e==null?void 0:e.role)==="doctor"||(e==null?void 0:e.role)==="nurse")&&t.jsxs(I,{onClick:()=>n({title:"Feature Coming Soon"}),children:[t.jsx(be,{className:"h-4 w-4 mr-2"}),"Add Wound Record"]})]}),t.jsxs("div",{className:"grid gap-6 lg:grid-cols-3",children:[t.jsxs(E,{className:"lg:col-span-2",children:[t.jsx(U,{children:t.jsxs(G,{className:"flex items-center gap-2",children:[t.jsx(Pe,{className:"h-5 w-5"}),"Wound Records"]})}),t.jsx(T,{children:o.length===0?t.jsxs("div",{className:"flex flex-col items-center justify-center gap-3 rounded-lg border-2 border-dashed p-8 text-center",children:[t.jsx("div",{className:"flex h-12 w-12 items-center justify-center rounded-full bg-muted",children:t.jsx(ze,{className:"h-6 w-6 text-muted-foreground"})}),t.jsxs("div",{children:[t.jsx("p",{className:"font-medium",children:"No Wound Records"}),t.jsx("p",{className:"text-sm text-muted-foreground",children:(e==null?void 0:e.role)==="patient"?"Your healthcare provider will add wound records here.":"Create the first wound record for this patient."})]})]}):t.jsx("div",{className:"flex flex-col gap-4",children:o.map(i=>t.jsx(E,{className:"border",children:t.jsx(T,{className:"p-4",children:t.jsxs("div",{className:"flex flex-col gap-4",children:[t.jsx("div",{className:"flex items-start justify-between",children:t.jsxs("div",{className:"flex-1",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("h3",{className:"font-semibold",children:i.woundType||"Wound Assessment"}),t.jsx(oe,{variant:N0(i.stage),children:i.stage||"Stage Unknown"})]}),t.jsxs("div",{className:"mt-2 flex items-center gap-4 text-sm text-muted-foreground",children:[t.jsxs("div",{className:"flex items-center gap-1",children:[t.jsx(Be,{className:"h-4 w-4"}),Z(new Date(i.date),"MMM d, yyyy h:mm a")]}),i.nurseId&&t.jsxs("div",{className:"flex items-center gap-1",children:[t.jsx(ga,{className:"h-4 w-4"}),"Nurse ID: ",i.nurseId]})]})]})}),i.size&&t.jsxs("div",{children:[t.jsx("p",{className:"text-sm font-medium",children:"Size"}),t.jsx("p",{className:"text-sm text-muted-foreground",children:i.size})]}),i.description&&t.jsxs("div",{children:[t.jsx("p",{className:"text-sm font-medium",children:"Description"}),t.jsx("p",{className:"text-sm text-muted-foreground",children:i.description})]}),i.treatmentPlan&&t.jsxs("div",{children:[t.jsx("p",{className:"text-sm font-medium",children:"Treatment Plan"}),t.jsx("p",{className:"text-sm text-muted-foreground",children:i.treatmentPlan})]}),i.notes&&t.jsxs("div",{children:[t.jsx("p",{className:"text-sm font-medium",children:"Notes"}),t.jsx("p",{className:"text-sm text-muted-foreground",children:i.notes})]}),i.photos&&i.photos.length>0&&t.jsxs("div",{children:[t.jsxs("p",{className:"text-sm font-medium flex items-center gap-1",children:[t.jsx(tm,{className:"h-4 w-4"}),"Photos"]}),t.jsx("div",{className:"mt-2 grid gap-2 sm:grid-cols-2",children:i.photos.map((l,d)=>t.jsxs("a",{href:l,target:"_blank",rel:"noopener noreferrer",className:"text-sm text-blue-600 underline hover:text-blue-700",children:["Photo ",d+1]},d))})]})]})})},i.id))})})]}),t.jsxs("div",{className:"flex flex-col gap-4",children:[t.jsxs(E,{children:[t.jsx(U,{children:t.jsx(G,{className:"text-base",children:"Care Guidelines"})}),t.jsxs(T,{className:"text-sm space-y-3",children:[t.jsxs("div",{children:[t.jsx("p",{className:"font-medium text-muted-foreground",children:"Daily Care"}),t.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Clean and monitor wound daily as instructed"})]}),t.jsxs("div",{children:[t.jsx("p",{className:"font-medium text-muted-foreground",children:"Signs to Watch"}),t.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Increased redness, warmth, discharge, or odor"})]}),t.jsxs("div",{children:[t.jsx("p",{className:"font-medium text-muted-foreground",children:"When to Contact"}),t.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Report any concerning changes immediately"})]})]})]}),t.jsxs(E,{children:[t.jsx(U,{children:t.jsx(G,{className:"text-base",children:"Status"})}),t.jsx(T,{children:t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("div",{className:"flex h-3 w-3 rounded-full bg-green-500"}),t.jsx("span",{className:"text-sm",children:"Under Supervision"})]})})]})]})]})]})}function C0(){return t.jsx("div",{className:"flex flex-col gap-2",children:[1,2,3,4,5].map(e=>t.jsx(xe,{className:"h-16 w-full"},e))})}function P0(){const{user:e}=ye(),{toast:n}=ct(),[r,s]=c.useState(""),{data:a,isLoading:o}=fe({queryKey:["/api/nurses"]}),i=a||[],l=i.filter(u=>`${u.firstName} ${u.lastName} ${u.specialty} ${u.department}`.toLowerCase().includes(r.toLowerCase())),d=u=>{n({title:"Contact Nurse",description:`Connecting to ${u.firstName} ${u.lastName}...`})};return o?t.jsxs("div",{className:"flex flex-col gap-6",children:[t.jsxs("div",{className:"flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between",children:[t.jsxs("div",{children:[t.jsx("h1",{className:"text-3xl font-bold",children:"Nursing Staff"}),t.jsx("p",{className:"text-muted-foreground",children:"Manage and coordinate with nursing team"})]}),(e==null?void 0:e.role)==="admin"&&t.jsxs(I,{children:[t.jsx(be,{className:"mr-2 h-4 w-4"}),"Add Nurse"]})]}),t.jsx(C0,{})]}):t.jsxs("div",{className:"flex flex-col gap-6","data-testid":"nurses-page",children:[t.jsxs("div",{className:"flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between",children:[t.jsxs("div",{children:[t.jsx("h1",{className:"text-3xl font-bold",children:"Nursing Staff"}),t.jsx("p",{className:"text-muted-foreground",children:(e==null?void 0:e.role)==="admin"?"Manage all nursing personnel":"Connect with our qualified nursing team"})]}),(e==null?void 0:e.role)==="admin"&&t.jsxs(I,{"data-testid":"button-add-nurse",children:[t.jsx(be,{className:"mr-2 h-4 w-4"}),"Add Nurse"]})]}),t.jsx("div",{className:"flex items-center gap-4",children:t.jsxs("div",{className:"relative flex-1 max-w-sm",children:[t.jsx(lt,{className:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-muted-foreground"}),t.jsx(De,{placeholder:"Search by name, specialty...",value:r,onChange:u=>s(u.target.value),className:"pl-10","data-testid":"input-search-nurses"})]})}),t.jsxs(E,{children:[t.jsx(U,{className:"pb-3",children:t.jsx(G,{children:"Nursing Staff Directory"})}),t.jsx(T,{className:"p-0",children:l.length===0?t.jsxs("div",{className:"flex flex-col items-center justify-center gap-3 p-12 text-center",children:[t.jsx("div",{className:"flex h-12 w-12 items-center justify-center rounded-full bg-muted",children:t.jsx(Re,{className:"h-6 w-6 text-muted-foreground"})}),t.jsxs("div",{children:[t.jsx("p",{className:"font-medium",children:"No nurses found"}),t.jsx("p",{className:"text-sm text-muted-foreground",children:r?"Try adjusting your search":"No nursing staff available"})]})]}):t.jsxs(No,{children:[t.jsx(So,{children:t.jsxs(Hn,{children:[t.jsx(Fe,{children:"Name"}),t.jsx(Fe,{children:"Specialty"}),t.jsx(Fe,{children:"Department"}),t.jsx(Fe,{children:"License #"}),t.jsx(Fe,{children:"Contact"}),t.jsx(Fe,{className:"text-right",children:"Actions"})]})}),t.jsx(Co,{children:l.map(u=>{var f,m;return t.jsxs(Hn,{children:[t.jsx($e,{children:t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx(Rt,{className:"h-8 w-8",children:t.jsxs(Dt,{className:"text-xs bg-primary text-primary-foreground font-semibold",children:[((f=u.firstName)==null?void 0:f[0])||"N",((m=u.lastName)==null?void 0:m[0])||""]})}),t.jsxs("div",{className:"flex flex-col",children:[t.jsxs("span",{className:"font-medium",children:[u.firstName," ",u.lastName]}),t.jsx("span",{className:"text-xs text-muted-foreground",children:u.id})]})]})}),t.jsx($e,{children:t.jsx(oe,{variant:"secondary",children:u.specialty||"General Nurse"})}),t.jsx($e,{children:u.department||""}),t.jsx($e,{className:"font-mono text-sm",children:u.licenseNumber||""}),t.jsx($e,{children:t.jsxs("div",{className:"flex flex-col gap-1 text-sm",children:[u.phone&&t.jsx("a",{href:`tel:${u.phone}`,className:"text-blue-600 hover:underline",children:u.phone}),u.email&&t.jsx("a",{href:`mailto:${u.email}`,className:"text-blue-600 hover:underline truncate",children:u.email})]})}),t.jsx($e,{className:"text-right",children:t.jsxs("div",{className:"flex gap-2 justify-end",children:[t.jsx(I,{size:"sm",variant:"ghost",onClick:()=>d(u),children:t.jsx(at,{className:"h-4 w-4"})}),t.jsx(I,{size:"sm",variant:"ghost",onClick:()=>n({title:"Schedule",description:`Scheduling with ${u.firstName}...`}),children:t.jsx(ue,{className:"h-4 w-4"})})]})})]},u.id)})})]})})]}),t.jsxs("div",{className:"grid gap-4 sm:grid-cols-2 lg:grid-cols-4",children:[t.jsxs(E,{children:[t.jsx(U,{className:"pb-2",children:t.jsx(G,{className:"text-sm font-medium",children:"Total Nurses"})}),t.jsxs(T,{children:[t.jsx("div",{className:"text-2xl font-bold",children:i.length}),t.jsx("p",{className:"text-xs text-muted-foreground",children:"Active staff"})]})]}),t.jsxs(E,{children:[t.jsx(U,{className:"pb-2",children:t.jsx(G,{className:"text-sm font-medium",children:"On Duty"})}),t.jsxs(T,{children:[t.jsx("div",{className:"text-2xl font-bold",children:Math.ceil(i.length*.6)}),t.jsx("p",{className:"text-xs text-muted-foreground",children:"Currently working"})]})]}),t.jsxs(E,{children:[t.jsx(U,{className:"pb-2",children:t.jsx(G,{className:"text-sm font-medium",children:"Departments"})}),t.jsxs(T,{children:[t.jsx("div",{className:"text-2xl font-bold",children:new Set(i.map(u=>u.department)).size}),t.jsx("p",{className:"text-xs text-muted-foreground",children:"Active departments"})]})]}),t.jsxs(E,{children:[t.jsx(U,{className:"pb-2",children:t.jsx(G,{className:"text-sm font-medium",children:"Specialties"})}),t.jsxs(T,{children:[t.jsx("div",{className:"text-2xl font-bold",children:new Set(i.map(u=>u.specialty)).size}),t.jsx("p",{className:"text-xs text-muted-foreground",children:"Available specialties"})]})]})]})]})}function T0(){return t.jsx("div",{className:"flex flex-col gap-4",children:[1,2,3].map(e=>t.jsx(E,{children:t.jsx(T,{className:"p-4",children:t.jsx(xe,{className:"h-20 w-full"})})},e))})}function M0(e){switch(e.toLowerCase()){case"paid":return"default";case"completed":return"default";case"pending":return"secondary";case"partial":return"secondary";case"cancelled":return"destructive";default:return"outline"}}function E0(){const{user:e}=ye(),{toast:n}=ct(),r=(e==null?void 0:e.role)==="patient"&&(e==null?void 0:e.id)||"patient-001",{data:s,isLoading:a}=fe({queryKey:[`/api/finance/billing?patientId=${r}`]}),{data:o,isLoading:i}=fe({queryKey:["/api/finance/insurances"]}),l=s||[],d=o||[],u=a||i,f=l.reduce((x,v)=>x+(v.amount||0),0),m=l.filter(x=>x.status==="paid").reduce((x,v)=>x+(v.amount||0),0),h=l.filter(x=>x.status==="pending"||x.status==="partial").reduce((x,v)=>x+(v.amount||0),0);return u?t.jsxs("div",{className:"flex flex-col gap-6",children:[t.jsxs("div",{children:[t.jsx("h1",{className:"text-3xl font-bold",children:"Finance & Billing"}),t.jsx("p",{className:"text-muted-foreground",children:"Manage billing and insurance information"})]}),t.jsx(T0,{})]}):t.jsxs("div",{className:"flex flex-col gap-6",children:[t.jsxs("div",{children:[t.jsx("h1",{className:"text-3xl font-bold",children:"Finance & Billing"}),t.jsx("p",{className:"text-muted-foreground",children:"View invoices, payments, and insurance information"})]}),t.jsxs("div",{className:"grid gap-4 md:grid-cols-3",children:[t.jsx(E,{children:t.jsxs(T,{className:"flex items-center gap-4 p-4",children:[t.jsx("div",{className:"flex h-12 w-12 items-center justify-center rounded-md bg-blue-100 dark:bg-blue-900/30",children:t.jsx(Mi,{className:"h-6 w-6 text-blue-600"})}),t.jsxs("div",{children:[t.jsx("p",{className:"text-sm text-muted-foreground",children:"Total Amount"}),t.jsxs("p",{className:"text-2xl font-bold",children:["KES ",f.toLocaleString()]})]})]})}),t.jsx(E,{children:t.jsxs(T,{className:"flex items-center gap-4 p-4",children:[t.jsx("div",{className:"flex h-12 w-12 items-center justify-center rounded-md bg-green-100 dark:bg-green-900/30",children:t.jsx(ha,{className:"h-6 w-6 text-green-600"})}),t.jsxs("div",{children:[t.jsx("p",{className:"text-sm text-muted-foreground",children:"Paid"}),t.jsxs("p",{className:"text-2xl font-bold",children:["KES ",m.toLocaleString()]})]})]})}),t.jsx(E,{children:t.jsxs(T,{className:"flex items-center gap-4 p-4",children:[t.jsx("div",{className:"flex h-12 w-12 items-center justify-center rounded-md bg-amber-100 dark:bg-amber-900/30",children:t.jsx(ze,{className:"h-6 w-6 text-amber-600"})}),t.jsxs("div",{children:[t.jsx("p",{className:"text-sm text-muted-foreground",children:"Pending"}),t.jsxs("p",{className:"text-2xl font-bold",children:["KES ",h.toLocaleString()]})]})]})})]}),t.jsxs("div",{className:"grid gap-6 lg:grid-cols-3",children:[t.jsxs("div",{className:"lg:col-span-2 flex flex-col gap-6",children:[t.jsxs(E,{children:[t.jsx(U,{children:t.jsxs(G,{className:"flex items-center gap-2",children:[t.jsx(pt,{className:"h-5 w-5"}),"Invoices & Statements"]})}),t.jsx(T,{children:l.length===0?t.jsxs("div",{className:"flex flex-col items-center justify-center gap-3 rounded-lg border-2 border-dashed p-8 text-center",children:[t.jsx("div",{className:"flex h-12 w-12 items-center justify-center rounded-full bg-muted",children:t.jsx(pt,{className:"h-6 w-6 text-muted-foreground"})}),t.jsxs("div",{children:[t.jsx("p",{className:"font-medium",children:"No Invoices"}),t.jsx("p",{className:"text-sm text-muted-foreground",children:"No billing records found"})]})]}):t.jsx("div",{className:"flex flex-col gap-3",children:l.map(x=>t.jsxs("div",{className:"flex items-center justify-between rounded-lg border p-4",children:[t.jsxs("div",{className:"flex-1",children:[t.jsx("div",{className:"font-medium",children:x.description||`Invoice #${x.invoiceNumber}`}),t.jsx("div",{className:"text-sm text-muted-foreground",children:Z(new Date(x.createdAt),"MMM d, yyyy")})]}),t.jsxs("div",{className:"flex flex-col items-end gap-2",children:[t.jsxs("div",{className:"text-lg font-semibold",children:[x.currency||"KES"," ",x.amount.toLocaleString()]}),t.jsx(oe,{variant:M0(x.status),className:"capitalize",children:x.status})]})]},x.id))})})]}),t.jsxs(E,{children:[t.jsx(U,{children:t.jsxs(G,{className:"flex items-center gap-2",children:[t.jsx(xt,{className:"h-5 w-5"}),"Insurance Providers"]})}),t.jsx(T,{children:d.length===0?t.jsxs("div",{className:"flex flex-col items-center justify-center gap-3 rounded-lg border-2 border-dashed p-8 text-center",children:[t.jsx("div",{className:"flex h-12 w-12 items-center justify-center rounded-full bg-muted",children:t.jsx(xt,{className:"h-6 w-6 text-muted-foreground"})}),t.jsxs("div",{children:[t.jsx("p",{className:"font-medium",children:"No Insurance Providers"}),t.jsx("p",{className:"text-sm text-muted-foreground",children:"Insurance information not available"})]})]}):t.jsx("div",{className:"flex flex-col gap-3",children:d.map(x=>t.jsxs("div",{className:"flex items-center gap-4 rounded-lg border p-4",children:[t.jsx("div",{className:"flex h-10 w-10 items-center justify-center rounded-md bg-blue-100 dark:bg-blue-900/30",children:t.jsx(xt,{className:"h-5 w-5 text-blue-600"})}),t.jsxs("div",{className:"flex-1",children:[t.jsx("div",{className:"font-medium",children:x.name}),x.code&&t.jsxs("div",{className:"text-sm text-muted-foreground",children:["Code: ",x.code]})]})]},x.id))})})]})]}),t.jsxs("div",{className:"flex flex-col gap-4",children:[t.jsxs(E,{children:[t.jsx(U,{children:t.jsxs(G,{className:"text-base flex items-center gap-2",children:[t.jsx(Mo,{className:"h-5 w-5"}),"Payment Methods"]})}),t.jsxs(T,{className:"flex flex-col gap-2",children:[t.jsxs(I,{variant:"outline",className:"justify-start",children:[t.jsx(Mo,{className:"h-4 w-4 mr-2"}),"Add Card"]}),t.jsx(I,{variant:"outline",className:"justify-start",children:"Bank Transfer"}),t.jsx(I,{variant:"outline",className:"justify-start",children:"M-Pesa / Mobile Money"})]})]}),t.jsxs(E,{children:[t.jsx(U,{children:t.jsx(G,{className:"text-base",children:"Quick Actions"})}),t.jsxs(T,{className:"flex flex-col gap-2",children:[t.jsxs(I,{variant:"outline",className:"justify-start",onClick:()=>n({title:"Invoice Download",description:"Preparing your invoice..."}),children:[t.jsx(pt,{className:"h-4 w-4 mr-2"}),"Download Invoice"]}),t.jsx(I,{variant:"outline",className:"justify-start",onClick:()=>n({title:"Support",description:"Contact billing support"}),children:"Contact Billing"})]})]}),t.jsxs(E,{children:[t.jsx(U,{children:t.jsx(G,{className:"text-base",children:"Payment Info"})}),t.jsxs(T,{className:"text-sm space-y-2 text-muted-foreground",children:[t.jsx("p",{children:" Accepted: All major cards, bank transfers, M-Pesa"}),t.jsx("p",{children:" Secure: 256-bit SSL encryption"}),t.jsx("p",{children:" Instant: Real-time payment confirmation"})]})]})]})]})]})}function R0(){return t.jsx("div",{className:"grid gap-4",children:[1,2,3,4].map(e=>t.jsx(E,{children:t.jsx(T,{className:"p-4",children:t.jsx(xe,{className:"h-20 w-full"})})},e))})}function D0(){const{user:e}=ye(),[n,r]=c.useState(""),[s,a]=c.useState("overview"),{data:o,isLoading:i}=fe({queryKey:["/api/hr/employees"],enabled:(e==null?void 0:e.role)==="admin"}),{data:l,isLoading:d}=fe({queryKey:["/api/hr/stats"],enabled:(e==null?void 0:e.role)==="admin"}),u=(o==null?void 0:o.filter(m=>`${m.designation} ${m.department}`.toLowerCase().includes(n.toLowerCase())))||[];if((e==null?void 0:e.role)!=="admin")return t.jsxs("div",{className:"flex flex-col items-center justify-center gap-4 py-12",children:[t.jsx(ze,{className:"h-12 w-12 text-muted-foreground"}),t.jsx("h2",{className:"text-xl font-semibold",children:"Access Denied"}),t.jsx("p",{className:"text-muted-foreground",children:"Only administrators can access HR Management"})]});const f=i||d;return t.jsxs("div",{className:"flex flex-col gap-6","data-testid":"hr-management-page",children:[t.jsxs("div",{className:"flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between",children:[t.jsxs("div",{children:[t.jsx("h1",{className:"text-3xl font-bold",children:"HR Management"}),t.jsx("p",{className:"text-muted-foreground",children:"Manage employees, attendance, payroll, and performance"})]}),t.jsxs(I,{className:"gap-2",children:[t.jsx(be,{className:"h-4 w-4"}),"Add Employee"]})]}),f?t.jsx(R0,{}):t.jsxs(t.Fragment,{children:[l&&t.jsxs("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:[t.jsx(E,{children:t.jsxs(T,{className:"flex items-center gap-4 p-4",children:[t.jsx("div",{className:"flex h-12 w-12 items-center justify-center rounded-md bg-blue-100 dark:bg-blue-900/30",children:t.jsx(Re,{className:"h-6 w-6 text-blue-600"})}),t.jsxs("div",{children:[t.jsx("p",{className:"text-sm text-muted-foreground",children:"Total Employees"}),t.jsx("p",{className:"text-2xl font-bold",children:l.totalEmployees})]})]})}),t.jsx(E,{children:t.jsxs(T,{className:"flex items-center gap-4 p-4",children:[t.jsx("div",{className:"flex h-12 w-12 items-center justify-center rounded-md bg-green-100 dark:bg-green-900/30",children:t.jsx(nm,{className:"h-6 w-6 text-green-600"})}),t.jsxs("div",{children:[t.jsx("p",{className:"text-sm text-muted-foreground",children:"Active"}),t.jsx("p",{className:"text-2xl font-bold",children:l.activeEmployees})]})]})}),t.jsx(E,{children:t.jsxs(T,{className:"flex items-center gap-4 p-4",children:[t.jsx("div",{className:"flex h-12 w-12 items-center justify-center rounded-md bg-orange-100 dark:bg-orange-900/30",children:t.jsx(ue,{className:"h-6 w-6 text-orange-600"})}),t.jsxs("div",{children:[t.jsx("p",{className:"text-sm text-muted-foreground",children:"On Leave"}),t.jsx("p",{className:"text-2xl font-bold",children:l.onLeaveCount})]})]})}),t.jsx(E,{children:t.jsxs(T,{className:"flex items-center gap-4 p-4",children:[t.jsx("div",{className:"flex h-12 w-12 items-center justify-center rounded-md bg-red-100 dark:bg-red-900/30",children:t.jsx(ze,{className:"h-6 w-6 text-red-600"})}),t.jsxs("div",{children:[t.jsx("p",{className:"text-sm text-muted-foreground",children:"Expiring Certs"}),t.jsx("p",{className:"text-2xl font-bold",children:l.certificationsExpiring})]})]})})]}),t.jsxs(Qn,{value:s,onValueChange:a,children:[t.jsxs(wn,{children:[t.jsx(me,{value:"overview",children:"Employees"}),t.jsx(me,{value:"attendance",children:"Attendance"}),t.jsx(me,{value:"leaves",children:"Leave Requests"}),t.jsx(me,{value:"payroll",children:"Payroll"}),t.jsx(me,{value:"performance",children:"Performance"})]}),t.jsxs(he,{value:"overview",className:"space-y-4",children:[t.jsx("div",{className:"flex items-center gap-4",children:t.jsxs("div",{className:"relative flex-1 max-w-sm",children:[t.jsx(lt,{className:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-muted-foreground"}),t.jsx(De,{placeholder:"Search by designation or department...",value:n,onChange:m=>r(m.target.value),className:"pl-10"})]})}),u.length>0?t.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:u.map(m=>t.jsxs(E,{className:"overflow-hidden hover:shadow-lg transition-shadow",children:[t.jsx(U,{className:"pb-3",children:t.jsxs("div",{className:"flex items-start justify-between",children:[t.jsxs("div",{children:[t.jsx(G,{className:"text-lg",children:m.designation}),t.jsx("p",{className:"text-sm text-muted-foreground",children:m.department})]}),t.jsx(oe,{variant:m.status==="active"?"default":"secondary",children:m.status})]})}),t.jsxs(T,{className:"space-y-3",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-xs text-muted-foreground",children:"Employee ID"}),t.jsx("p",{className:"font-mono text-sm font-semibold",children:m.employeeId})]}),t.jsxs("div",{children:[t.jsx("p",{className:"text-xs text-muted-foreground",children:"Salary"}),t.jsxs("p",{className:"text-lg font-bold",children:[m.currency||"KES"," ",m.salary.toLocaleString()]})]}),t.jsxs("div",{className:"flex items-center gap-2 text-xs text-muted-foreground",children:[t.jsx(ue,{className:"h-4 w-4"}),"Joined: ",new Date(m.joinDate).toLocaleDateString()]}),t.jsxs(I,{variant:"outline",className:"w-full",size:"sm",children:["View Details",t.jsx(Ci,{className:"ml-2 h-3 w-3"})]})]})]},m.id))}):t.jsx(E,{children:t.jsxs(T,{className:"flex flex-col items-center justify-center gap-3 p-12 text-center",children:[t.jsx(Re,{className:"h-12 w-12 text-muted-foreground"}),t.jsxs("div",{children:[t.jsx("p",{className:"font-medium",children:"No employees found"}),t.jsx("p",{className:"text-sm text-muted-foreground",children:n?"Try adjusting your search":"No employee records yet"})]})]})})]}),t.jsx(he,{value:"attendance",children:t.jsxs(E,{children:[t.jsx(U,{children:t.jsxs(G,{className:"flex items-center gap-2",children:[t.jsx(Be,{className:"h-5 w-5"}),"Attendance Management"]})}),t.jsxs(T,{className:"space-y-4",children:[t.jsx("p",{className:"text-sm text-muted-foreground",children:"View and manage employee attendance records, check-in/out times, and generate attendance reports."}),t.jsxs(I,{children:[t.jsx(be,{className:"mr-2 h-4 w-4"}),"Record Attendance"]})]})]})}),t.jsx(he,{value:"leaves",children:t.jsxs(E,{children:[t.jsx(U,{children:t.jsxs(G,{className:"flex items-center gap-2",children:[t.jsx(ue,{className:"h-5 w-5"}),"Leave Management"]})}),t.jsxs(T,{className:"space-y-4",children:[t.jsx("p",{className:"text-sm text-muted-foreground",children:"Review and approve leave requests, track leave balances, and manage employee time off."}),t.jsxs("div",{className:"space-y-2",children:[t.jsxs(I,{variant:"outline",className:"w-full",children:[t.jsx(be,{className:"mr-2 h-4 w-4"}),"New Leave Request"]}),t.jsxs(I,{variant:"outline",className:"w-full",children:["View Pending Requests (",(l==null?void 0:l.upcomingLeaveRequests)||0,")"]})]})]})]})}),t.jsx(he,{value:"payroll",children:t.jsxs(E,{children:[t.jsx(U,{children:t.jsxs(G,{className:"flex items-center gap-2",children:[t.jsx(Mi,{className:"h-5 w-5"}),"Payroll Management"]})}),t.jsxs(T,{className:"space-y-4",children:[t.jsxs("p",{className:"text-sm text-muted-foreground",children:["Process payroll, manage salaries, deductions, and generate payslips. Pending: ",(l==null?void 0:l.pendingPayroll)||0]}),t.jsxs("div",{className:"space-y-2",children:[t.jsxs(I,{children:[t.jsx(be,{className:"mr-2 h-4 w-4"}),"Process Payroll"]}),t.jsx(I,{variant:"outline",className:"w-full",children:"View Payroll History"})]})]})]})}),t.jsx(he,{value:"performance",children:t.jsxs(E,{children:[t.jsx(U,{children:t.jsxs(G,{className:"flex items-center gap-2",children:[t.jsx(rm,{className:"h-5 w-5"}),"Performance Management"]})}),t.jsxs(T,{className:"space-y-4",children:[t.jsx("p",{className:"text-sm text-muted-foreground",children:"Conduct performance reviews, track ratings, and provide feedback to employees."}),t.jsxs(I,{children:[t.jsx(be,{className:"mr-2 h-4 w-4"}),"Create Review"]})]})]})})]})]})]})}function _0(){ye();const[e,n]=c.useState(""),[r,s]=c.useState("all"),{data:a,isLoading:o}=fe({queryKey:["/api/appointments"]}),i=(a==null?void 0:a.filter(d=>{var m,h;const u=((m=d.patientName)==null?void 0:m.toLowerCase().includes(e.toLowerCase()))||((h=d.doctorName)==null?void 0:h.toLowerCase().includes(e.toLowerCase())),f=r==="all"||d.status===r;return u&&f}))??[],l=d=>{switch(d){case"scheduled":return"bg-blue-100 text-blue-800";case"confirmed":return"bg-green-100 text-green-800";case"in_progress":return"bg-yellow-100 text-yellow-800";case"completed":return"bg-gray-100 text-gray-800";case"cancelled":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}};return t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{children:[t.jsx("h1",{className:"text-3xl font-bold",children:"OPD Console"}),t.jsx("p",{className:"text-muted-foreground mt-2",children:"Manage out-patient department consultations"})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[t.jsx(E,{children:t.jsx(T,{className:"pt-6",children:t.jsxs("div",{className:"text-center",children:[t.jsx("p",{className:"text-3xl font-bold",children:(a==null?void 0:a.filter(d=>d.status==="scheduled").length)||0}),t.jsx("p",{className:"text-sm text-muted-foreground",children:"Scheduled"})]})})}),t.jsx(E,{children:t.jsx(T,{className:"pt-6",children:t.jsxs("div",{className:"text-center",children:[t.jsx("p",{className:"text-3xl font-bold",children:(a==null?void 0:a.filter(d=>d.status==="confirmed").length)||0}),t.jsx("p",{className:"text-sm text-muted-foreground",children:"Confirmed"})]})})}),t.jsx(E,{children:t.jsx(T,{className:"pt-6",children:t.jsxs("div",{className:"text-center",children:[t.jsx("p",{className:"text-3xl font-bold",children:(a==null?void 0:a.filter(d=>d.status==="in_progress").length)||0}),t.jsx("p",{className:"text-sm text-muted-foreground",children:"In Progress"})]})})}),t.jsx(E,{children:t.jsx(T,{className:"pt-6",children:t.jsxs("div",{className:"text-center",children:[t.jsx("p",{className:"text-3xl font-bold",children:(a==null?void 0:a.filter(d=>d.status==="completed").length)||0}),t.jsx("p",{className:"text-sm text-muted-foreground",children:"Completed"})]})})})]}),t.jsxs("div",{className:"flex gap-4 flex-wrap",children:[t.jsx("div",{className:"flex-1 min-w-64",children:t.jsxs("div",{className:"relative",children:[t.jsx(lt,{className:"absolute left-3 top-3 text-muted-foreground",size:18}),t.jsx(De,{placeholder:"Search patient or doctor...",className:"pl-10",value:e,onChange:d=>n(d.target.value)})]})}),t.jsxs(I,{variant:"outline",className:"gap-2",children:[t.jsx(sm,{size:18}),"Filter"]}),t.jsxs(I,{className:"gap-2",children:[t.jsx(be,{size:18}),"New Consultation"]})]}),t.jsxs(E,{children:[t.jsx(U,{children:t.jsx(G,{children:"Today's Consultations"})}),t.jsx(T,{children:o?t.jsx("p",{className:"text-muted-foreground",children:"Loading..."}):i.length===0?t.jsx("p",{className:"text-muted-foreground text-center py-8",children:"No consultations found"}):t.jsx("div",{className:"space-y-3",children:i.map(d=>t.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg hover:bg-accent transition",children:[t.jsxs("div",{className:"flex items-center gap-4 flex-1",children:[t.jsx("div",{className:"w-10 h-10 bg-blue-100 rounded-full flex items-center justify-center",children:t.jsx(ga,{size:20,className:"text-blue-600"})}),t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsx("p",{className:"font-semibold truncate",children:d.patientName}),t.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[t.jsx(Be,{size:16}),d.dateTime?new Date(d.dateTime).toLocaleTimeString():"N/A"]})]})]}),t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsxs("div",{className:"text-right",children:[t.jsx("p",{className:"text-sm font-medium",children:d.doctorName}),t.jsx("p",{className:"text-xs text-muted-foreground",children:d.department})]}),t.jsx(oe,{className:l(d.status),children:d.status.replace("_"," ")})]})]},d.id))})})]})]})}const Jt=[{id:"ward-001",name:"General Ward A",type:"General",capacity:6,occupied:5},{id:"ward-002",name:"ICU Ward",type:"ICU",capacity:4,occupied:3},{id:"ward-003",name:"Pediatric Ward",type:"Pediatric",capacity:8,occupied:6},{id:"ward-004",name:"Maternity Ward",type:"Maternity",capacity:5,occupied:4}],k0=[{id:"adm-001",patientName:"James Kamau",wardName:"General Ward A",bedNo:"A-01",admissionDate:"2026-01-20",doctorName:"Dr. Sarah Johnson",diagnosis:"Hypertension",status:"admitted"},{id:"adm-002",patientName:"Mary Kipchoge",wardName:"ICU Ward",bedNo:"ICU-02",admissionDate:"2026-01-18",doctorName:"Dr. Ahmed Hassan",diagnosis:"Post-surgery Recovery",status:"critical"},{id:"adm-003",patientName:"baby Ochieng",wardName:"Pediatric Ward",bedNo:"P-03",admissionDate:"2026-01-22",doctorName:"Dr. Emily Carter",diagnosis:"Acute Gastroenteritis",status:"stable"}];function A0(){ye(),ct();const[e,n]=c.useState(""),r=k0.filter(o=>o.patientName.toLowerCase().includes(e.toLowerCase())||o.wardName.toLowerCase().includes(e.toLowerCase())),s=Jt.reduce((o,i)=>o+i.occupied/i.capacity,0)/Jt.length*100,a=o=>{switch(o){case"critical":return"bg-red-100 text-red-800";case"stable":return"bg-green-100 text-green-800";case"admitted":return"bg-blue-100 text-blue-800";default:return"bg-gray-100 text-gray-800"}};return t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{children:[t.jsx("h1",{className:"text-3xl font-bold",children:"IPD Console"}),t.jsx("p",{className:"text-muted-foreground mt-2",children:"In-Patient Department Management"})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[t.jsx(E,{children:t.jsx(T,{className:"pt-6",children:t.jsxs("div",{children:[t.jsx("p",{className:"text-xs text-muted-foreground",children:"Total Beds"}),t.jsx("p",{className:"text-3xl font-bold",children:Jt.reduce((o,i)=>o+i.capacity,0)})]})})}),t.jsx(E,{children:t.jsx(T,{className:"pt-6",children:t.jsxs("div",{children:[t.jsx("p",{className:"text-xs text-muted-foreground",children:"Occupied"}),t.jsx("p",{className:"text-3xl font-bold",children:Jt.reduce((o,i)=>o+i.occupied,0)})]})})}),t.jsx(E,{children:t.jsx(T,{className:"pt-6",children:t.jsxs("div",{children:[t.jsx("p",{className:"text-xs text-muted-foreground",children:"Available"}),t.jsx("p",{className:"text-3xl font-bold",children:Jt.reduce((o,i)=>o+(i.capacity-i.occupied),0)})]})})}),t.jsx(E,{children:t.jsx(T,{className:"pt-6",children:t.jsxs("div",{children:[t.jsx("p",{className:"text-xs text-muted-foreground",children:"Occupancy Rate"}),t.jsxs("p",{className:"text-3xl font-bold",children:[Math.round(s),"%"]})]})})})]}),t.jsxs(E,{children:[t.jsx(U,{children:t.jsxs(G,{className:"flex items-center gap-2",children:[t.jsx(fa,{size:20}),"Ward Status"]})}),t.jsx(T,{children:t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:Jt.map(o=>t.jsxs("div",{className:"border rounded-lg p-4 hover:bg-accent transition",children:[t.jsx("h3",{className:"font-semibold",children:o.name}),t.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:o.type}),t.jsxs("div",{className:"mb-3",children:[t.jsxs("div",{className:"flex justify-between text-xs mb-1",children:[t.jsx("span",{children:"Bed Occupancy"}),t.jsxs("span",{className:"font-semibold",children:[o.occupied,"/",o.capacity]})]}),t.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:t.jsx("div",{className:"bg-blue-600 h-2 rounded-full",style:{width:`${o.occupied/o.capacity*100}%`}})})]}),t.jsx(I,{size:"sm",className:"w-full",variant:"outline",children:"Manage"})]},o.id))})})]}),t.jsxs("div",{className:"flex gap-4",children:[t.jsxs("div",{className:"flex-1 relative",children:[t.jsx(lt,{className:"absolute left-3 top-3 text-muted-foreground",size:18}),t.jsx(De,{placeholder:"Search patient or ward...",className:"pl-10",value:e,onChange:o=>n(o.target.value)})]}),t.jsxs(I,{className:"gap-2",children:[t.jsx(be,{size:18}),"New Admission"]})]}),t.jsxs(E,{children:[t.jsx(U,{children:t.jsx(G,{children:"Current Admissions"})}),t.jsx(T,{children:t.jsx("div",{className:"space-y-3",children:r.map(o=>t.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg hover:bg-accent transition",children:[t.jsxs("div",{className:"flex-1",children:[t.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[t.jsx("p",{className:"font-semibold",children:o.patientName}),t.jsx(oe,{className:a(o.status),children:o.status})]}),t.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm text-muted-foreground",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-xs",children:"Ward / Bed"}),t.jsxs("p",{className:"font-medium text-foreground",children:[o.wardName," - ",o.bedNo]})]}),t.jsxs("div",{children:[t.jsx("p",{className:"text-xs",children:"Doctor"}),t.jsx("p",{className:"font-medium text-foreground",children:o.doctorName})]}),t.jsxs("div",{children:[t.jsx("p",{className:"text-xs",children:"Diagnosis"}),t.jsx("p",{className:"font-medium text-foreground",children:o.diagnosis})]}),t.jsxs("div",{children:[t.jsx("p",{className:"text-xs",children:"Admitted"}),t.jsx("p",{className:"font-medium text-foreground",children:new Date(o.admissionDate).toLocaleDateString()})]})]})]}),t.jsxs("div",{className:"flex gap-2",children:[t.jsx(I,{size:"sm",variant:"outline",children:"View"}),o.status!=="critical"&&t.jsxs(I,{size:"sm",variant:"ghost",className:"gap-1",children:[t.jsx(Ni,{size:16}),"Discharge"]})]})]},o.id))})})]})]})}const Zt=[{id:"emg-001",patientName:"Peter Kipchoge",triageLevel:"critical",arrivalTime:"2026-01-23T14:30:00",complaint:"Severe chest pain",assignedDoctor:"Dr. Michael Chen",status:"in_treatment",bedno:"ER-01"},{id:"emg-002",patientName:"Grace Mwangi",triageLevel:"urgent",arrivalTime:"2026-01-23T14:45:00",complaint:"Head injury after accident",assignedDoctor:"Dr. Sarah Johnson",status:"waiting_doctor",bedno:"ER-02"},{id:"emg-003",patientName:"John Mbatha",triageLevel:"non_urgent",arrivalTime:"2026-01-23T15:00:00",complaint:"Laceration on left arm",assignedDoctor:null,status:"triage_pending",bedno:"ER-03"}];function I0(){const[e,n]=c.useState(""),r=Zt.filter(i=>i.patientName.toLowerCase().includes(e.toLowerCase())||i.complaint.toLowerCase().includes(e.toLowerCase())),s=i=>{switch(i){case"critical":return"bg-red-100 text-red-800 border-red-300";case"urgent":return"bg-orange-100 text-orange-800 border-orange-300";case"semi_urgent":return"bg-yellow-100 text-yellow-800 border-yellow-300";case"non_urgent":return"bg-green-100 text-green-800 border-green-300";default:return"bg-gray-100 text-gray-800"}},a=i=>({in_treatment:"In Treatment",waiting_doctor:"Waiting for Doctor",triage_pending:"Triage Pending",discharged:"Discharged"})[i]||i,o=i=>{const l=new Date(i);return`${Math.floor((new Date().getTime()-l.getTime())/6e4)} min`};return t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{children:[t.jsxs("h1",{className:"text-3xl font-bold flex items-center gap-2",children:[t.jsx(Lt,{className:"text-red-600"}),"Emergency/Casualty Console"]}),t.jsx("p",{className:"text-muted-foreground mt-2",children:"Critical patient management and triage"})]}),t.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 flex items-center gap-3",children:[t.jsx(ze,{className:"text-red-600",size:20}),t.jsxs("div",{children:[t.jsx("p",{className:"font-semibold text-red-900",children:"Active Emergency Cases"}),t.jsxs("p",{className:"text-sm text-red-700",children:[Zt.length," patient(s) currently in emergency department"]})]})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[t.jsx(E,{className:"border-red-200",children:t.jsx(T,{className:"pt-6",children:t.jsxs("div",{className:"text-center",children:[t.jsx("p",{className:"text-3xl font-bold text-red-600",children:Zt.filter(i=>i.triageLevel==="critical").length}),t.jsx("p",{className:"text-sm text-muted-foreground",children:"Critical"})]})})}),t.jsx(E,{className:"border-orange-200",children:t.jsx(T,{className:"pt-6",children:t.jsxs("div",{className:"text-center",children:[t.jsx("p",{className:"text-3xl font-bold text-orange-600",children:Zt.filter(i=>i.triageLevel==="urgent").length}),t.jsx("p",{className:"text-sm text-muted-foreground",children:"Urgent"})]})})}),t.jsx(E,{className:"border-yellow-200",children:t.jsx(T,{className:"pt-6",children:t.jsxs("div",{className:"text-center",children:[t.jsx("p",{className:"text-3xl font-bold text-yellow-600",children:Zt.filter(i=>i.triageLevel==="semi_urgent").length}),t.jsx("p",{className:"text-sm text-muted-foreground",children:"Semi-Urgent"})]})})}),t.jsx(E,{className:"border-green-200",children:t.jsx(T,{className:"pt-6",children:t.jsxs("div",{className:"text-center",children:[t.jsx("p",{className:"text-3xl font-bold text-green-600",children:Zt.filter(i=>i.triageLevel==="non_urgent").length}),t.jsx("p",{className:"text-sm text-muted-foreground",children:"Non-Urgent"})]})})})]}),t.jsxs("div",{className:"flex gap-4",children:[t.jsxs("div",{className:"flex-1 relative",children:[t.jsx(lt,{className:"absolute left-3 top-3 text-muted-foreground",size:18}),t.jsx(De,{placeholder:"Search patient or complaint...",className:"pl-10",value:e,onChange:i=>n(i.target.value)})]}),t.jsxs(I,{className:"gap-2 bg-red-600 hover:bg-red-700",children:[t.jsx(be,{size:18}),"Register Patient"]})]}),t.jsxs(E,{className:"border-red-200",children:[t.jsx(U,{children:t.jsx(G,{children:"Emergency Queue"})}),t.jsx(T,{children:t.jsx("div",{className:"space-y-3",children:r.map(i=>t.jsxs("div",{className:`border-2 rounded-lg p-4 ${s(i.triageLevel)}`,children:[t.jsxs("div",{className:"flex items-start justify-between mb-3",children:[t.jsxs("div",{className:"flex-1",children:[t.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[t.jsx("p",{className:"font-bold text-lg",children:i.patientName}),t.jsx(oe,{variant:"outline",children:i.bedno})]}),t.jsx("p",{className:"font-semibold text-sm mb-2",children:i.complaint})]}),t.jsxs("div",{className:"text-right",children:[t.jsx(oe,{className:s(i.triageLevel),children:i.triageLevel.toUpperCase()}),t.jsxs("p",{className:"text-xs mt-1 flex items-center justify-end gap-1",children:[t.jsx(Be,{size:14}),o(i.arrivalTime)]})]})]}),t.jsxs("div",{className:"grid grid-cols-3 gap-4 text-sm mb-3 pb-3 border-t border-current border-opacity-20",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-xs opacity-75",children:"Assigned Doctor"}),t.jsx("p",{className:"font-semibold",children:i.assignedDoctor||"Unassigned"})]}),t.jsxs("div",{children:[t.jsx("p",{className:"text-xs opacity-75",children:"Status"}),t.jsx("p",{className:"font-semibold",children:a(i.status)})]}),t.jsxs("div",{children:[t.jsx("p",{className:"text-xs opacity-75",children:"Bed"}),t.jsx("p",{className:"font-semibold",children:i.bedno})]})]}),t.jsxs("div",{className:"flex gap-2",children:[t.jsx(I,{size:"sm",variant:"outline",children:"View Details"}),!i.assignedDoctor&&t.jsx(I,{size:"sm",variant:"outline",children:"Assign Doctor"})]})]},i.id))})})]})]})}function O0(){return t.jsxs(om,{children:[t.jsx(ge,{path:"/",component:dw}),t.jsx(ge,{path:"/appointments",component:CN}),t.jsx(ge,{path:"/health-records",component:DN}),t.jsx(ge,{path:"/prescriptions",component:WN}),t.jsx(ge,{path:"/lab-results",component:VN}),t.jsx(ge,{path:"/messages",component:a0}),t.jsx(ge,{path:"/virtual-care",component:o0}),t.jsx(ge,{path:"/wound-care",component:S0}),t.jsx(ge,{path:"/patients",component:d0}),t.jsx(ge,{path:"/doctors",component:f0}),t.jsx(ge,{path:"/nurses",component:P0}),t.jsx(ge,{path:"/finance",component:E0}),t.jsx(ge,{path:"/hr-management",component:D0}),t.jsx(ge,{path:"/departments",component:h0}),t.jsx(ge,{path:"/opd",component:_0}),t.jsx(ge,{path:"/ipd",component:A0}),t.jsx(ge,{path:"/emergency",component:I0}),t.jsx(ge,{path:"/settings",component:y0}),t.jsx(ge,{component:w0})]})}function L0(){const{user:e,isLoading:n}=ye();if(n)return t.jsx("div",{className:"flex h-screen items-center justify-center",children:t.jsxs("div",{className:"flex flex-col items-center gap-4",children:[t.jsx(xe,{className:"h-12 w-12 rounded-full"}),t.jsx(xe,{className:"h-4 w-32"})]})});const r={"--sidebar-width":"16rem","--sidebar-width-icon":"3rem"};return t.jsx(Lg,{style:r,children:t.jsxs("div",{className:"flex h-screen w-full",children:[t.jsx(sv,{}),t.jsxs("div",{className:"flex flex-1 flex-col overflow-hidden",children:[t.jsxs("header",{className:"flex h-14 shrink-0 items-center justify-between gap-4 border-b px-4",children:[t.jsx($g,{"data-testid":"button-sidebar-toggle"}),t.jsx(av,{})]}),t.jsx("main",{className:"flex-1 overflow-auto p-6",children:t.jsx(O0,{})})]})]})})}function F0(){return t.jsx(am,{client:Wt,children:t.jsx(yp,{defaultTheme:"light",storageKey:"neudebri-theme",children:t.jsx(wp,{children:t.jsxs(Wl,{children:[t.jsx(L0,{}),t.jsx(Yh,{})]})})})})}Ri(document.getElementById("root")).render(t.jsx(F0,{}));
